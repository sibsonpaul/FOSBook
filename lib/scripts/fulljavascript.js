$(document).bind("mobileinit",function(){$.extend($.mobile,{ajaxEnabled:false})});(function(a){a.fn.formToWizard=function(b){function i(b){a(".linkButton").removeClass("ui-btn-up-b");a(".linkButton").removeClass("ui-btn-up-f");a("#step"+b+"Link").addClass("ui-btn-up-f");a(".linkButton").addClass("ui-btn-up-b")}function h(b){var c="step"+b;a("#"+c+"commands").append("<a href='#' id='"+c+"Next' class='next ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-b' data-inline='true'><span class='ui-btn-inner ui-btn-corner-all' aria-hidden='true'><span class='ui-btn-text'>Next</span><span class='ui-icon ui-icon-arrow-r ui-icon-shadow'></span></span></a>");a("#"+c+"Next").bind("click",function(d){a("#"+c).hide();a("#step"+(b+1)).show();if(b+2==e)a(f).show();i(b+1)})}function g(b){var c="step"+b;a("#"+c+"commands").append("<a href='#' id='"+c+"Prev' class='prev ui-btn ui-btn-icon-left ui-btn-corner-all ui-shadow ui-btn-up-b' data-inline='true'><span class='ui-btn-inner ui-btn-corner-all' aria-hidden='true'><span class='ui-icon ui-icon-arrow-l ui-icon-shadow'></span><span class='ui-btn-text'>Back</span></span></a>");a("#"+c+"Prev").bind("click",function(d){a("#"+c).hide();a("#step"+(b-1)).show();a(f).hide();i(b-1)})}b=a.extend({submitButton:"form_submit"},b);var c=this;var d=a(c).find(".form_page");var e=d.size();var f=a("#"+b.submitButton).parent(".ui-btn");f.hide();a(c).before("<div id='steps' data-role='controlgroup' data-type='horizontal' data-theme='b'></div>");d.each(function(b){a(this).wrap("<div id='step"+b+"' class='form_content'></div>");a(this).append("<div id='step"+b+"commands' class='prev_next'></div>");var c=a(this).data("name");a("#steps").append("<a href='#' data-step='"+b+"' id='step"+b+"Link' class='linkButton' data-role='button' data-theme='b' data-inline='true'>"+c+"</a>");a("#step"+b+"Link").bind("click",function(b){var c=a(this).data("step");a(".form_content").hide();a("#step"+c).show();i(c)});if(b==0){h(b);i(b)}else if(b==e-1){a("#step"+b).hide();g(b)}else{a("#step"+b).hide();g(b);h(b)}})}})(jQuery);$.fn.customFileInput=function(){var a=$(this).addClass("customfile-input").mouseover(function(){b.addClass("customfile-hover")}).mouseout(function(){b.removeClass("customfile-hover")}).focus(function(){b.addClass("customfile-focus");a.data("val",a.val())}).blur(function(){b.removeClass("customfile-focus");$(this).trigger("checkChange")}).bind("disable",function(){a.attr("disabled",true);b.addClass("customfile-disabled")}).bind("enable",function(){a.removeAttr("disabled");b.removeClass("customfile-disabled")}).bind("checkChange",function(){if(a.val()&&a.val()!=a.data("val")){a.trigger("change")}}).bind("change",function(){var a=$(this).val().split(/\\/).pop();var b="customfile-ext-"+a.split(".").pop().toLowerCase();d.text(a).removeClass(d.data("fileExt")||"").addClass(b).data("fileExt",b).addClass("customfile-feedback-populated");c.text("Change")}).click(function(){a.data("val",a.val());setTimeout(function(){a.trigger("checkChange")},100)});var b=$('<div class="customfile"></div>');var c=$('<span class="customfile-button" aria-hidden="true">Browse</span>').appendTo(b);var d=$('<span class="customfile-feedback" aria-hidden="true">No file selected...</span>').appendTo(b);if(a.is("[disabled]")){a.trigger("disable")}b.mousemove(function(c){a.css({left:c.pageX-b.offset().left-a.outerWidth()+20,top:c.pageY-b.offset().top-$(window).scrollTop()-3})}).insertAfter(a);a.appendTo(b);return $(this)};if(!console){console={log:function(a){}}}(function(a,b){a.widget("mobile.datebox",a.mobile.widget,{options:{version:"1.0.0-2012011400",theme:false,defaultTheme:"c",pickPageTheme:"b",pickPageInputTheme:"e",pickPageButtonTheme:"a",pickPageHighButtonTheme:"e",pickPageOHighButtonTheme:"e",pickPageOAHighButtonTheme:"e",pickPageODHighButtonTheme:"e",pickPageTodayButtonTheme:"e",pickPageSlideButtonTheme:"d",pickPageFlipButtonTheme:"b",forceInheritTheme:false,centerWindow:false,calHighToday:true,calHighPicked:true,transition:"pop",noAnimation:false,disableManualInput:false,disabled:false,wheelExists:false,swipeEnabled:true,zindex:"500",debug:false,clickEvent:"vclick",numberInputEnhance:true,internalInputType:"text",resizeListener:true,titleDialogLabel:false,meridiemLetters:["AM","PM"],timeOutputOverride:false,timeFormats:{12:"gg:ii AA",24:"HH:ii"},durationFormat:"DD ddd, hh:ii:ss",timeOutput:false,rolloverMode:{m:true,d:true,h:true,i:true,s:true},mode:"datebox",calShowDays:true,calShowOnlyMonth:false,useDialogForceTrue:false,useDialogForceFalse:false,fullScreen:false,fullScreenAlways:false,useDialog:false,useModal:false,useInline:false,useInlineBlind:false,noButtonFocusMode:false,noButton:false,noSetButton:false,openCallback:false,closeCallback:false,open:false,nestedBox:false,lastDuration:false,fieldsOrder:false,fieldsOrderOverride:false,durationOrder:["d","h","i","s"],defaultDateFormat:"YYYY-MM-DD",dateFormat:false,timeFormatOverride:false,headerFormat:false,dateOutput:false,minuteStep:1,calTodayButton:false,calWeekMode:false,calWeekModeFirstDay:1,calWeekModeHighlight:true,calStartDay:false,defaultPickerValue:false,defaultDate:false,minYear:false,maxYear:false,afterToday:false,beforeToday:false,maxDays:false,minDays:false,highDays:false,highDates:false,highDatesAlt:false,blackDays:false,blackDates:false,enableDates:false,fixDateArrays:false,durationSteppers:{d:1,h:1,i:1,s:1},disabledDayColor:"#888",useLang:"en",lang:{en:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"ddd, mmm dd, YYYY",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"YYYY-MM-DD",useArabicIndic:false,isRTL:false}}},_dateboxHandler:function(b,c){if(!b.isPropagationStopped()){switch(c.method){case"close":a(this).data("datebox").close(c.fromCloseButton);break;case"open":a(this).data("datebox").open();break;case"set":a(this).val(c.value);a(this).trigger("change");break;case"doset":if(a(this).data("datebox").options.mode==="timebox"||a(this).data("datebox").options.mode==="durationbox"){a(this).trigger("datebox",{method:"set",value:a(this).data("datebox")._formatTime(a(this).data("datebox").theDate),date:a(this).data("datebox").theDate})}else{a(this).trigger("datebox",{method:"set",value:a(this).data("datebox")._formatDate(a(this).data("datebox").theDate),date:a(this).data("datebox").theDate})}break;case"dooffset":a(this).data("datebox")._offset(c.type,c.amount,true);break;case"dorefresh":a(this).data("datebox")._update();break;case"doreset":a(this).data("datebox").hardreset();break}}},_fixArray:function(b){var c=0,d=this,e=new RegExp("^([0-9]+)-([0-9]+)-([0-9]+)$"),f=null;if(a.isArray(b)){for(c=0;c<b.length;c++){f=[0];f=e.exec(b[c]);if(f.length===4){b[c]=f[1]+"-"+d._zeroPad(parseInt(f[2],10))+"-"+d._zeroPad(parseInt(f[3],10))}}}return b},_digitReplace:function(a,b){var c=48,d=57,e=1584,f=null,g=null,h="";if(b===-1){c=48+1584;d=57+1584;e=-1584}for(f=0;f<a.length;f++){g=a.charCodeAt(f);if(g>=c&&g<=d){h=h+String.fromCharCode(g+e)}else{h=h+String.fromCharCode(g)}}return h},_makeDisplayIndic:function(){var b=this,c=this.options;b.pickerContent.find("*").each(function(){if(a(this).children().length<1){a(this).text(b._digitReplace(a(this).text()))}else{if(a(this).hasClass("ui-datebox-slideday")){a(this).html(b._digitReplace(a(this).html()))}}});b.pickerContent.find("input").each(function(){a(this).val(b._digitReplace(a(this).val()))})},_zeroPad:function(a){return(a<10?"0":"")+String(a)},_makeOrd:function(a){var b=a%10;if(a>9&&a<21){return"th"}if(b>3){return"th"}return["th","st","nd","rd"][b]},_isInt:function(a){return a.toString().search(/^[0-9]+$/)===0},_dstAdjust:function(a){if(!a){return null}a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_getFirstDay:function(a){return(new Date(a.getFullYear(),a.getMonth(),1)).getDay()},_getRecDays:function(a,b,c){if(b===null){b=this.theDate.getMonth()+1}if(a===null){a=this.theDate.getFullYear()}var d=this,e=new Date(a,b-1,1,0,0,0,0),f=[],g;if(e.getDay()>c){e.setDate(8-(e.getDay()-c))}else{if(e.getDay()<c){e.setDate(1+(c-e.getDay()))}}f[0]=e.getFullYear()+"-"+d._zeroPad(e.getMonth()+1)+"-"+d._zeroPad(e.getDate());for(g=1;g<6;g++){e.setDate(e.getDate()+7);if(e.getMonth()+1===b){f[g]=e.getFullYear()+"-"+d._zeroPad(e.getMonth()+1)+"-"+d._zeroPad(e.getDate())}}return f},_getLastDate:function(a){return 32-this._dstAdjust(new Date(a.getFullYear(),a.getMonth(),32)).getDate()},_getLastDateBefore:function(a){return 32-this._dstAdjust(new Date(a.getFullYear(),a.getMonth()-1,32)).getDate()},_formatter:function(a,b){a=a.replace("HH",this._zeroPad(b.getHours()));a=a.replace("GG",b.getHours());a=a.replace("hh",this._zeroPad(b.getHours()===0||b.getHours()===12?12:b.getHours()<12?b.getHours():b.getHours()-12));a=a.replace("gg",b.getHours()===0||b.getHours()===12?12:b.getHours()<12?b.getHours():b.getHours()-12);a=a.replace("ii",this._zeroPad(b.getMinutes()));a=a.replace("ss",this._zeroPad(b.getSeconds()));a=a.replace("AA",b.getHours()<12?this.options.meridiemLetters[0].toUpperCase():this.options.meridiemLetters[1].toUpperCase());a=a.replace("aa",b.getHours()<12?this.options.meridiemLetters[0].toLowerCase():this.options.meridiemLetters[1].toLowerCase());a=a.replace("SS",this._makeOrd(b.getDate()));a=a.replace("YYYY",b.getFullYear());a=a.replace("mmmm",this.options.lang[this.options.useLang].monthsOfYearShort[b.getMonth()]);a=a.replace("mmm",this.options.lang[this.options.useLang].monthsOfYear[b.getMonth()]);a=a.replace("MM",this._zeroPad(b.getMonth()+1));a=a.replace("mm",b.getMonth()+1);a=a.replace("dddd",this.options.lang[this.options.useLang].daysOfWeekShort[b.getDay()]);a=a.replace("ddd",this.options.lang[this.options.useLang].daysOfWeek[b.getDay()]);a=a.replace("DD",this._zeroPad(b.getDate()));a=a.replace("dd",b.getDate());a=a.replace("UU",(b.getTime()-b.getMilliseconds())/1e3);if(this.options.lang[this.options.useLang].useArabicIndic===true){a=this._digitReplace(a)}return a},_formatHeader:function(a){if(this.options.headerFormat!==false){return this._formatter(this.options.headerFormat,a)}else{return this._formatter(this.options.lang[this.options.useLang].headerFormat,a)}},_formatDate:function(a){return this._formatter(this.options.dateOutput,a)},_isoDate:function(a,b,c){return String(a)+"-"+(b<10?"0":"")+String(b)+"-"+(c<10?"0":"")+String(c)},_formatTime:function(a){var b=this,c=[false,false,false],d,e,f,g,h=this.options.durationFormat,i=[0,0,0,0];if(this.options.mode==="durationbox"){d=this.options.durationFormat;d=d.replace(/ddd/g,".+?");d=d.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)");d=new RegExp("^"+d+"$");e=d.exec(this.options.durationFormat);f=(b.theDate.getTime()-b.theDate.getMilliseconds())/1e3-(b.initDate.getTime()-b.initDate.getMilliseconds())/1e3;g=f;i[0]=parseInt(f/(60*60*24),10);f=f-i[0]*60*60*24;i[1]=parseInt(f/(60*60),10);f=f-i[1]*60*60;i[2]=parseInt(f/60,10);f=f-i[2]*60;i[3]=f;if(!e[0].match(/DD/)){c[0]=true;i[1]=i[1]+i[0]*24}if(!e[0].match(/hh/)){c[1]=true;i[2]=i[2]+i[1]*60}if(!e[0].match(/ii/)){c[2]=true;i[3]=i[3]+i[2]*60}if(this.options.debug){console.log({format:e,collapse:c,seconds:g,parts:i})}h=h.replace("DD",i[0]);h=h.replace("ddd",i[0]>1?this.options.lang[this.options.useLang].durationDays[1]:this.options.lang[this.options.useLang].durationDays[0]);h=h.replace("hh",b._zeroPad(i[1]));h=h.replace("ii",b._zeroPad(i[2]));h=h.replace("ss",b._zeroPad(i[3]));if(this.options.lang[this.options.useLang].useArabicIndic===true){return this._digitReplace(h)}else{return h}}else{return this._formatter(b.options.timeOutput,a)}},_makeDate:function(b){b=a.trim(b);var c=this.options,d=this,e=null,f=null,g=null,h=null,i=new Date,j=[false,false,false],k=[i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),0],l;if(c.lang[this.options.useLang].useArabicIndic===true){b=this._digitReplace(b,-1)}if(c.mode==="durationbox"){e=c.durationFormat;e=e.replace(/ddd/g,".+?");e=e.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)");e=new RegExp("^"+e+"$");f=e.exec(b);g=e.exec(c.durationFormat);if(c.debug){console.log({info:"EXPERIMENTAL REGEX MODE ENABLED",string:b,regex:e,input:f,format:g})}if(f===null||f.length!==g.length){if(typeof c.defaultPickerValue==="number"&&c.defaultPickerValue>0){return new Date(d.initDate.getTime()+parseInt(c.defaultPickerValue,10)*1e3)}else{return new Date(d.initDate.getTime())}}else{h=(d.initDate.getTime()-d.initDate.getMilliseconds())/1e3;for(l=0;l<f.length;l++){if(g[l].match(/^DD$/i)){h=h+parseInt(f[l],10)*60*60*24}if(g[l].match(/^hh$/i)){h=h+parseInt(f[l],10)*60*60}if(g[l].match(/^ii$/i)){h=h+parseInt(f[l],10)*60}if(g[l].match(/^ss$/i)){h=h+parseInt(f[l],10)}}return new Date(h*1e3)}}else{if(c.mode==="timebox"||c.mode==="timeflipbox"){e=c.timeOutput}else{e=c.dateOutput}e=e.replace(/dddd|mmmm/g,"(.+?)");e=e.replace(/ddd|SS/g,".+?");e=e.replace(/mmm/g,"(.+?)");e=e.replace(/ *AA/ig," *(.*?)");e=e.replace(/yyyy|dd|mm|gg|hh|ii/ig,"([0-9yYdDmMgGhHi]+)");e=e.replace(/ss|UU/g,"([0-9sU]+)");e=new RegExp("^"+e+"$");f=e.exec(b);if(c.mode==="timebox"||c.mode==="timeflipbox"){g=e.exec(c.timeOutput)}else{g=e.exec(c.dateOutput)}if(c.debug){console.log({info:"EXPERIMENTAL REGEX MODE ENABLED",string:b,regex:e,input:f,format:g})}if(f===null||f.length!==g.length){if(c.defaultPickerValue!==false){if(a.isArray(c.defaultPickerValue)&&c.defaultPickerValue.length===3){if(c.mode==="timebox"||c.mode==="timeflipbox"){return new Date(k[0],k[1],k[2],c.defaultPickerValue[0],c.defaultPickerValue[1],c.defaultPickerValue[2],0)}else{return new Date(c.defaultPickerValue[0],c.defaultPickerValue[1],c.defaultPickerValue[2],0,0,0,0)}}else{if(typeof c.defaultPickerValue==="number"){return new Date(c.defaultPickerValue*1e3)}else{if(c.mode==="timebox"||c.mode==="timeflipbox"){h=c.defaultPickerValue.split(":");if(h.length===3){i=new Date(k[0],k[1],k[2],parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10),0);if(isNaN(i.getDate())){i=new Date}}}else{h=c.defaultPickerValue.split("-");if(h.length===3){i=new Date(parseInt(h[0],10),parseInt(h[1],10)-1,parseInt(h[2],10),0,0,0,0);if(isNaN(i.getDate())){i=new Date}}}}}}}else{for(l=0;l<f.length;l++){if(g[l].match(/^UU$/)){k[6]=parseInt(f[l],10)}if(g[l].match(/^gg$/i)){k[3]=parseInt(f[l],10)}if(g[l].match(/^hh$/i)){k[3]=parseInt(f[l],10)}if(g[l].match(/^ii$/i)){k[4]=parseInt(f[l],10)}if(g[l].match(/^ss$/)){k[5]=parseInt(f[l],10)}if(g[l].match(/^dd$/i)){k[2]=parseInt(f[l],10)}if(g[l].match(/^mm$/i)){k[1]=parseInt(f[l],10)-1}if(g[l].match(/^yyyy$/i)){k[0]=parseInt(f[l],10)}if(g[l].match(/^AA$/i)){if(f[l].toLowerCase().charAt(0)==="a"&&k[3]===12){k[3]=0}else{if(f[l].toLowerCase().charAt(0)==="p"&&k[3]!==12){k[3]=k[3]+12}}}if(g[l].match(/^mmm$/i)){h=a.inArray(f[l],c.lang[c.useLang].monthsOfYear);if(h>-1){k[1]=h}}if(g[l].match(/^mmmm$/i)){h=a.inArray(f[l],c.lang[c.useLang].monthsOfYearShort);if(h>-1){k[1]=h}}}}if(g[0].match(/UU/)){return new Date(k[6]*1e3)}else{if(g[0].match(/G|g|i|s|H|h|A/)){return new Date(k[0],k[1],k[2],k[3],k[4],k[5],0)}else{return new Date(k[0],k[1],k[2],0,0,0,0)}}}},_checker:function(a){return parseInt(String(a.getFullYear())+this._zeroPad(a.getMonth()+1)+this._zeroPad(a.getDate()),10)},_hoover:function(b){a(b).toggleClass("ui-btn-up-"+a(b).jqmData("theme")+" ui-btn-down-"+a(b).jqmData("theme"))},_offset:function(a,b,c){var d=this,e=this.options;if(typeof c==="undefined"){c=true}d.input.trigger("datebox",{method:"offset",type:a,amount:b});switch(a){case"y":d.theDate.setYear(d.theDate.getFullYear()+b);break;case"m":if(e.debug){console.log(e.rolloverMode)}if(e.rolloverMode.m||d.theDate.getMonth()+b<12&&d.theDate.getMonth()+b>-1){d.theDate.setMonth(d.theDate.getMonth()+b)}break;case"d":if(e.rolloverMode.d||d.theDate.getDate()+b>0&&d.theDate.getDate()+b<d._getLastDate(d.theDate)+1){d.theDate.setDate(d.theDate.getDate()+b)}break;case"h":if(e.rolloverMode.h||d.theDate.getHours()+b>-1&&d.theDate.getHours()+b<24){d.theDate.setHours(d.theDate.getHours()+b)}break;case"i":if(e.rolloverMode.i||d.theDate.getMinutes()+b>-1&&d.theDate.getMinutes()+b<60){d.theDate.setMinutes(d.theDate.getMinutes()+b)}break;case"s":if(e.rolloverMode.s||d.theDate.getSeconds()+b>-1&&d.theDate.getSeconds()+b<60){d.theDate.setSeconds(d.theDate.getSeconds()+b)}break;case"a":if(d.pickerMeri.val()===e.meridiemLetters[0]){d._offset("h",12,false)}else{d._offset("h",-12,false)}break}if(c===true){d._update()}},_updateduration:function(){var a=this,b=(a.initDate.getTime()-a.initDate.getMilliseconds())/1e3;if(!a._isInt(a.pickerDay.val())){a.pickerDay.val(0)}if(!a._isInt(a.pickerHour.val())){a.pickerHour.val(0)}if(!a._isInt(a.pickerMins.val())){a.pickerMins.val(0)}if(!a._isInt(a.pickerSecs.val())){a.pickerSecs.val(0)}b=b+parseInt(a.pickerDay.val(),10)*60*60*24;b=b+parseInt(a.pickerHour.val(),10)*60*60;b=b+parseInt(a.pickerMins.val(),10)*60;b=b+parseInt(a.pickerSecs.val(),10);a.theDate.setTime(b*1e3);a._update()},_checkConstraints:function(){var a=this,b=null,c=this.options;if(c.afterToday!==false){b=new Date;if(a.theDate<b){a.theDate=b}}if(c.beforeToday!==false){b=new Date;if(a.theDate>b){a.theDate=b}}if(c.maxDays!==false){b=new Date;b.setDate(b.getDate()+c.maxDays);if(a.theDate>b){a.theDate=b}}if(c.minDays!==false){b=new Date;b.setDate(b.getDate()-c.minDays);if(a.theDate<b){a.theDate=b}}if(c.maxYear!==false){b=new Date(c.maxYear,0,1);b.setDate(b.getDate()-1);if(a.theDate>b){a.theDate=b}}if(c.minYear!==false){b=new Date(c.minYear,0,1);if(a.theDate<b){a.theDate=b}}},_orientChange:function(b){var c=a(b.currentTarget).data("datebox"),d=c.options,e=c.focusedEl.offset(),f=c.pickerContent.outerHeight(),g=c.pickerContent.innerWidth(),h=e.top+c.focusedEl.outerHeight()/2-f/2,i=e.left+c.focusedEl.outerWidth()/2-g/2;b.stopPropagation();if(!c.pickerContent.is(":visible")||d.useDialog===true){return false}else{if(i+g>a(document).width()){i=a(document).width()-g-1}if(i<0){i=0}if(d.centerWindow){i=a(document).width()/2-g/2}if(f+h>a(document).height()){h=a(document).height()-(f+2)}if(h<45){h=45}c.pickerContent.css({top:h,left:i})}},_update:function(){var b=this,c=b.options,d=null,e,f,g,h,i,j,k,l,m,n,o={d:60*60*24,h:60*60,i:60,s:1},p={};b.input.trigger("datebox",{method:"refresh"});if(c.mode==="durationbox"){e=(b.theDate.getTime()-b.theDate.getMilliseconds())/1e3-(b.initDate.getTime()-b.initDate.getMilliseconds())/1e3;if(e<0){e=0;b.theDate.setTime(b.initDate.getTime())}c.lastDuration=e;j=parseInt(e/o.d,10);e=e-j*o.d;b.pickerDay.val(j);j=parseInt(e/o.h,10);e=e-j*o.h;b.pickerHour.val(j);j=parseInt(e/o.i,10);e=e-j*o.i;b.pickerMins.val(j);b.pickerSecs.val(parseInt(e,10))}if(c.mode==="timebox"){if(c.minuteStep!==1){e=b.theDate.getMinutes()%c.minuteStep;if(e!==0){b.theDate.setMinutes(b.theDate.getMinutes()-e)}}b.pickerMins.val(b._zeroPad(b.theDate.getMinutes()));if(c.lang[c.useLang].timeFormat===12||c.timeFormatOverride===12){if(b.theDate.getHours()>11){b.pickerMeri.val(c.meridiemLetters[1]);if(b.theDate.getHours()===12){b.pickerHour.val(12)}else{b.pickerHour.val(b.theDate.getHours()-12)}}else{b.pickerMeri.val(c.meridiemLetters[0]);if(b.theDate.getHours()===0){b.pickerHour.val(12)}else{b.pickerHour.val(b.theDate.getHours())}}}else{b.pickerHour.val(b.theDate.getHours())}}if(c.mode==="flipbox"||c.mode==="timeflipbox"){b._checkConstraints();l=b._makeDate(b.input.val());b.controlsHeader.html(b._formatHeader(b.theDate));for(j=0;j<c.fieldsOrder.length;j++){n=true;switch(c.fieldsOrder[j]){case"y":i=b.pickerYar.find("ul");i.html("");for(e=-15;e<16;e++){k=l.getFullYear()===b.theDate.getFullYear()+e?c.pickPageHighButtonTheme:c.pickPageFlipButtonTheme;if(e===0){k=c.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k,style:n===true?"margin-top: -453px":""}).html("<span>"+(b.theDate.getFullYear()+e)+"</span>").jqmData("offset",e).jqmData("theme",k).appendTo(i);if(n===true){n=false}}break;case"m":i=b.pickerMon.find("ul");i.html("");for(e=-12;e<13;e++){d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),1);d.setMonth(d.getMonth()+e);k=l.getMonth()===d.getMonth()&&l.getYear()===d.getYear()?c.pickPageHighButtonTheme:c.pickPageFlipButtonTheme;if(e===0){k=c.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k,style:n===true?"margin-top: -357px":""}).jqmData("offset",e).jqmData("theme",k).html("<span>"+c.lang[c.useLang].monthsOfYearShort[d.getMonth()]+"</span>").appendTo(i);if(n===true){n=false}}break;case"d":i=b.pickerDay.find("ul");i.html("");for(e=-15;e<16;e++){d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),b.theDate.getDate());d.setDate(d.getDate()+e);k=l.getDate()===d.getDate()&&l.getMonth()===d.getMonth()&&l.getYear()===d.getYear()?c.pickPageHighButtonTheme:c.pickPageFlipButtonTheme;if(e===0){k=c.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k,style:n===true?"margin-top: -453px":""}).jqmData("offset",e).jqmData("theme",k).html("<span>"+d.getDate()+"</span>").appendTo(i);if(n===true){n=false}}break;case"h":i=b.pickerHour.find("ul");i.html("");for(e=-12;e<13;e++){d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),b.theDate.getDate(),b.theDate.getHours());d.setHours(d.getHours()+e);k=e===0?c.pickPageButtonTheme:c.pickPageFlipButtonTheme;a("<li>",{"class":"ui-body-"+k,style:n===true?"margin-top: -357px":""}).jqmData("offset",e).jqmData("theme",k).html("<span>"+(c.lang[c.useLang].timeFormat===12||c.timeFormatOverride===12?d.getHours()===0?"12":d.getHours()<12?d.getHours():d.getHours()===12?"12":d.getHours()-12:d.getHours())+"</span>").appendTo(i);if(n===true){n=false}}break;case"i":i=b.pickerMins.find("ul");i.html("");for(e=-30;e<31;e++){if(c.minuteStep>1){b.theDate.setMinutes(b.theDate.getMinutes()-b.theDate.getMinutes()%c.minuteStep)}d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),b.theDate.getDate(),b.theDate.getHours(),b.theDate.getMinutes());d.setMinutes(d.getMinutes()+e*c.minuteStep);k=e===0?c.pickPageButtonTheme:c.pickPageFlipButtonTheme;a("<li>",{"class":"ui-body-"+k,style:n===true?"margin-top: -933px":""}).jqmData("offset",e).jqmData("theme",k).html("<span>"+b._zeroPad(d.getMinutes())+"</span>").appendTo(i);if(n===true){n=false}}break;case"a":i=b.pickerMeri.find("ul");i.html("");if(b.theDate.getHours()>11){n="-65";k=[c.pickPageFlipButtonTheme,c.pickPageButtonTheme]}else{n="-33";k=[c.pickPageButtonTheme,c.pickPageFlipButtonTheme]}a("<li>").appendTo(i).clone().appendTo(i);a("<li>",{"class":"ui-body-"+k[0],style:"margin-top: "+n+"px"}).jqmData("offset",1).jqmData("theme",k[0]).html("<span>"+c.meridiemLetters[0]+"</span>").appendTo(i);a("<li>",{"class":"ui-body-"+k[1]}).jqmData("offset",1).jqmData("theme",k[1]).html("<span>"+c.meridiemLetters[1]+"</span>").appendTo(i);a("<li>").appendTo(i).clone().appendTo(i);break}}}if(c.mode==="slidebox"){b._checkConstraints();l=b._makeDate(b.input.val());b.controlsHeader.html(b._formatHeader(b.theDate));b.controlsInput.html("");for(j=0;j<c.fieldsOrder.length;j++){m=a("<div>").jqmData("rowtype",c.fieldsOrder[j]);if(c.wheelExists){m.bind("mousewheel",function(c,d){c.preventDefault();b._offset(a(this).jqmData("rowtype"),d>0?1:-1)})}i=a("<div>",{"class":"ui-datebox-sliderow-int"}).jqmData("rowtype",c.fieldsOrder[j]).appendTo(m);if(c.lang[c.useLang].isRTL===true){i.css("direction","rtl")}if(c.swipeEnabled){i.bind(b.START_DRAG,function(c){if(!b.dragMove){b.dragMove=true;b.dragTarget=a(this);b.dragPos=parseInt(b.dragTarget.css("marginLeft").replace(/px/i,""),10);b.dragStart=b.touch?c.originalEvent.changedTouches[0].pageX:c.pageX;b.dragEnd=false;c.stopPropagation();c.preventDefault()}})}switch(c.fieldsOrder[j]){case"y":m.addClass("ui-datebox-sliderow-ym");i.css("marginLeft","-333px");for(e=-5;e<6;e++){k=l.getFullYear()===b.theDate.getFullYear()+e?c.pickPageHighButtonTheme:c.pickPageSlideButtonTheme;if(e===0){k=c.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slideyear ui-corner-all ui-btn-up-"+k}).html(b.theDate.getFullYear()+e).jqmData("offset",e).jqmData("theme",k).bind("vmouseover vmouseout",function(){b._hoover(this)}).bind(c.clickEvent,function(c){c.preventDefault();b._offset("y",parseInt(a(this).jqmData("offset"),10))}).appendTo(i)}break;case"m":m.addClass("ui-datebox-sliderow-ym");i.css("marginLeft","-204px");for(e=-6;e<7;e++){d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),1);d.setMonth(d.getMonth()+e);k=l.getMonth()===d.getMonth()&&l.getYear()===d.getYear()?c.pickPageHighButtonTheme:c.pickPageSlideButtonTheme;if(e===0){k=c.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slidemonth ui-corner-all ui-btn-up-"+k}).jqmData("offset",e).jqmData("theme",k).html(c.lang[c.useLang].monthsOfYearShort[d.getMonth()]).bind("vmouseover vmouseout",function(){b._hoover(this)}).bind(c.clickEvent,function(c){c.preventDefault();b._offset("m",parseInt(a(this).jqmData("offset"),10))}).appendTo(i)}break;case"d":m.addClass("ui-datebox-sliderow-d");i.css("marginLeft","-386px");for(e=-15;e<16;e++){d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),b.theDate.getDate());d.setDate(d.getDate()+e);k=l.getDate()===d.getDate()&&l.getMonth()===d.getMonth()&&l.getYear()===d.getYear()?c.pickPageHighButtonTheme:c.pickPageSlideButtonTheme;if(e===0){k=c.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slideday ui-corner-all ui-btn-up-"+k}).jqmData("offset",e).jqmData("theme",k).html(d.getDate()+'<br /><span class="ui-datebox-slidewday">'+c.lang[c.useLang].daysOfWeekShort[d.getDay()]+"</span>").bind("vmouseover vmouseout",function(){b._hoover(this)}).bind(c.clickEvent,function(c){c.preventDefault();b._offset("d",parseInt(a(this).jqmData("offset"),10))}).appendTo(i)}break;case"h":m.addClass("ui-datebox-sliderow-hi");i.css("marginLeft","-284px");for(e=-12;e<13;e++){d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),b.theDate.getDate(),b.theDate.getHours());d.setHours(d.getHours()+e);k=e===0?c.pickPageButtonTheme:c.pickPageSlideButtonTheme;a("<div>",{"class":"ui-datebox-slidehour ui-corner-all ui-btn-up-"+k}).jqmData("offset",e).jqmData("theme",k).html(c.lang[c.useLang].timeFormat===12||c.timeFormatOverride===12?d.getHours()===0?'12<span class="ui-datebox-slidewday">AM</span>':d.getHours()<12?d.getHours()+'<span class="ui-datebox-slidewday">AM</span>':d.getHours()===12?'12<span class="ui-datebox-slidewday">PM</span>':d.getHours()-12+'<span class="ui-datebox-slidewday">PM</span>':d.getHours()).bind("vmouseover vmouseout",function(){b._hoover(this)}).bind(c.clickEvent,function(c){c.preventDefault();b._offset("h",parseInt(a(this).jqmData("offset"),10))}).appendTo(i)}break;case"i":m.addClass("ui-datebox-sliderow-hi");i.css("marginLeft","-896px");for(e=-30;e<31;e++){d=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),b.theDate.getDate(),b.theDate.getHours(),b.theDate.getMinutes());d.setMinutes(d.getMinutes()+e);k=e===0?c.pickPageButtonTheme:c.pickPageSlideButtonTheme;a("<div>",{"class":"ui-datebox-slidemins ui-corner-all ui-btn-up-"+k}).jqmData("offset",e).jqmData("theme",k).html(b._zeroPad(d.getMinutes())).bind("vmouseover vmouseout",function(){b._hoover(this)}).bind(c.clickEvent,function(c){c.preventDefault();b._offset("i",parseInt(a(this).jqmData("offset"),10))}).appendTo(i)}break}m.appendTo(b.controlsInput)}}if(c.mode==="datebox"){b._checkConstraints();b.controlsHeader.html(b._formatHeader(b.theDate));b.pickerMon.val(b.theDate.getMonth()+1);b.pickerDay.val(b.theDate.getDate());b.pickerYar.val(b.theDate.getFullYear())}if(c.mode==="calbox"){b.controlsInput.html(c.lang[c.useLang].monthsOfYear[b.theDate.getMonth()]+" "+b.theDate.getFullYear());b.controlsSet.html("");p={today:-1,highlightDay:-1,presetDay:-1,nexttoday:1,thisDate:new Date,maxDate:new Date,minDate:new Date,currentMonth:false,weekMode:0,weekDays:null,thisTheme:c.pickPageButtonTheme};p.start=b._getFirstDay(b.theDate);p.end=b._getLastDate(b.theDate);p.lastend=b._getLastDateBefore(b.theDate);p.presetDate=b._makeDate(b.input.val());if(c.calStartDay!==false||typeof c.lang[c.useLang].calStartDay==="number"){if(c.calStartDay!==false){p.start=p.start-c.calStartDay}else{p.start=p.start-c.lang[c.useLang].calStartDay}if(p.start<0){p.start=p.start+7}}p.prevtoday=p.lastend-(p.start-1);p.checkDates=c.enableDates===false&&(c.afterToday!==false||c.beforeToday!==false||c.notToday!==false||c.maxDays!==false||c.minDays!==false||c.blackDates!==false||c.blackDays!==false);if(p.thisDate.getMonth()===b.theDate.getMonth()&&p.thisDate.getFullYear()===b.theDate.getFullYear()){p.currentMonth=true;p.highlightDay=p.thisDate.getDate()}if(b._checker(p.presetDate)===b._checker(b.theDate)){p.presetDay=p.presetDate.getDate()}b.calNoPrev=false;b.calNoNext=false;if(c.afterToday===true&&(p.currentMonth===true||p.thisDate.getMonth()>=b.theDate.getMonth()&&b.theDate.getFullYear()===p.thisDate.getFullYear())){b.calNoPrev=true}if(c.beforeToday===true&&(p.currentMonth===true||p.thisDate.getMonth()<=b.theDate.getMonth()&&b.theDate.getFullYear()===p.thisDate.getFullYear())){b.calNoNext=true}if(c.minDays!==false){p.minDate.setDate(p.minDate.getDate()-c.minDays);if(b.theDate.getFullYear()===p.minDate.getFullYear()&&b.theDate.getMonth()<=p.minDate.getMonth()){b.calNoPrev=true}}if(c.maxDays!==false){p.maxDate.setDate(p.maxDate.getDate()+c.maxDays);if(b.theDate.getFullYear()===p.maxDate.getFullYear()&&b.theDate.getMonth()>=p.maxDate.getMonth()){b.calNoNext=true}}if(c.calShowDays){if(c.lang[c.useLang].daysOfWeekShort.length<8){c.daysOfWeekShort=c.lang[c.useLang].daysOfWeekShort.concat(c.lang[c.useLang].daysOfWeekShort)}p.weekDays=a("<div>",{"class":"ui-datebox-gridrow"}).appendTo(b.controlsSet);if(c.lang[c.useLang].isRTL===true){p.weekDays.css("direction","rtl")}for(e=0;e<=6;e++){a("<div>"+c.lang[c.useLang].daysOfWeekShort[(e+c.calStartDay)%7]+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty ui-datebox-griddate-label").appendTo(p.weekDays)}}if(c.fixDateArrays===true){c.blackDates=b._fixArray(c.blackDates);c.highDates=b._fixArray(c.highDates);c.highDatesAlt=b._fixArray(c.highDatesAlt);c.enableDates=b._fixArray(c.enableDates)}for(f=0;f<=5;f++){if(f===0||f>0&&p.today>0&&p.today<=p.end){i=a("<div>",{"class":"ui-datebox-gridrow"}).appendTo(b.controlsSet);if(c.lang[c.useLang].isRTL===true){i.css("direction","rtl")}for(g=0;g<=6;g++){if(g===0){p.weekMode=p.today<1?p.prevtoday-p.lastend+c.calWeekModeFirstDay:p.today+c.calWeekModeFirstDay}if(g===p.start&&f===0){p.today=1}if(p.today>p.end){p.today=-1}if(p.today<1){if(c.calShowOnlyMonth){a("<div>",{"class":"ui-datebox-griddate ui-datebox-griddate-empty"}).appendTo(i)}else{if(c.enableDates!==false){if(a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth(),p.prevtoday),c.enableDates)>-1||a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth()+2,p.nexttoday),c.enableDates)>-1){h=false}else{h=true}}else{if(c.afterToday!==false&&f===0&&p.thisDate.getMonth()>=b.theDate.getMonth()-1&&b.theDate.getFullYear()===p.thisDate.getFullYear()&&p.thisDate.getDate()>p.prevtoday||c.beforeToday!==false&&f!==0&&p.thisDate.getMonth()<=b.theDate.getMonth()+1&&b.theDate.getFullYear()===p.thisDate.getFullYear()&&p.thisDate.getDate()<p.nexttoday||c.blackDays!==false&&a.inArray(g,c.blackDays)>-1||c.blackDates!==false&&a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth(),p.prevtoday),c.blackDates)>-1||c.blackDates!==false&&a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth()+2,p.nexttoday),c.blackDates)>-1){h=true}else{h=false}}if(f===0){a("<div>"+String(p.prevtoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(i).jqmData("date",c.calWeekMode?p.weekMode+p.lastend:p.prevtoday).bind(!h?c.clickEvent:"error",function(c){c.preventDefault();if(!b.calNoPrev){b.theDate.setMonth(b.theDate.getMonth()-1);b.theDate.setDate(a(this).jqmData("date"));b.input.trigger("datebox",{method:"set",value:b._formatDate(b.theDate),date:b.theDate});b.input.trigger("datebox",{method:"close"})}});p.prevtoday++}else{a("<div>"+String(p.nexttoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(i).jqmData("date",c.calWeekMode?p.weekMode:p.nexttoday).bind(!h?c.clickEvent:"error",function(d){d.preventDefault();if(!b.calNoNext){b.theDate.setDate(a(this).jqmData("date"));if(!c.calWeekMode){b.theDate.setMonth(b.theDate.getMonth()+1)}b.input.trigger("datebox",{method:"set",value:b._formatDate(b.theDate),date:b.theDate});b.input.trigger("datebox",{method:"close"})}});p.nexttoday++}}}else{h=false;if(c.enableDates){if(a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth()+1,p.today),c.enableDates)<0){h=true}}if(p.checkDates){if(c.afterToday&&b._checker(p.thisDate)>b._checker(b.theDate)+p.today-b.theDate.getDate()){h=true}if(!h&&c.beforeToday&&b._checker(p.thisDate)<b._checker(b.theDate)+p.today-b.theDate.getDate()){h=true}if(!h&&c.notToday&&p.today===p.highlightDay){h=true}if(!h&&c.maxDays!==false&&b._checker(p.maxDate)<b._checker(b.theDate)+p.today-b.theDate.getDate()){h=true}if(!h&&c.minDays!==false&&b._checker(p.minDate)>b._checker(b.theDate)+p.today-b.theDate.getDate()){h=true}if(!h&&(c.blackDays!==false||c.blackDates!==false)){if(a.inArray(g,c.blackDays)>-1||a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth()+1,p.today),c.blackDates)>-1){h=true}}}if(c.calHighPicked&&p.today===p.presetDay){p.thisTheme=c.pickPageHighButtonTheme}else{if(c.calHighToday&&p.today===p.highlightDay){p.thisTheme=c.pickPageTodayButtonTheme}else{if(a.isArray(c.highDatesAlt)&&a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth()+1,p.today),c.highDatesAlt)>-1){p.thisTheme=c.pickPageOAHighButtonTheme}else{if(a.isArray(c.highDates)&&a.inArray(b._isoDate(b.theDate.getFullYear(),b.theDate.getMonth()+1,p.today),c.highDates)>-1){p.thisTheme=c.pickPageOHighButtonTheme}else{if(a.isArray(c.highDays)&&a.inArray(g,c.highDays)>-1){p.thisTheme=c.pickPageODHighButtonTheme}else{p.thisTheme=c.pickPageButtonTheme}}}}}a("<div>"+String(p.today)+"</div>").addClass("ui-datebox-griddate ui-corner-all").jqmData("date",c.calWeekMode?p.weekMode:p.today).jqmData("theme",p.thisTheme).appendTo(i).addClass("ui-btn-up-"+p.thisTheme).bind("vmouseover vmouseout",function(){if(c.calWeekMode!==false&&c.calWeekModeHighlight===true){a(this).parent().find("div").each(function(){b._hoover(this)})}else{b._hoover(this)}}).bind(!h?c.clickEvent:"error",function(c){c.preventDefault();b.theDate.setDate(a(this).jqmData("date"));b.input.trigger("datebox",{method:"set",value:b._formatDate(b.theDate),date:b.theDate});b.input.trigger("datebox",{method:"close"})}).css(h?"color":"nocolor",c.disabledDayColor);p.today++}}}}}if(c.lang[this.options.useLang].useArabicIndic===true){b._makeDisplayIndic()}},_create:function(){a(document).trigger("dateboxcreate");var b=this,c=a.extend(this.options,this.element.jqmData("options")),d=this.element,e=c.theme===false&&typeof a(b).jqmData("theme")==="undefined"?typeof d.parentsUntil(":jqmData(theme)").parent().jqmData("theme")==="undefined"?c.defaultTheme:d.parentsUntil(":jqmData(theme)").parent().jqmData("theme"):c.theme,f=d.wrap('<div class="ui-input-datebox ui-shadow-inset ui-corner-all ui-body-'+e+'"></div>').parent(),g=new Date,h=new Date(g.getTime()),i=a('<a href="#" class="ui-input-clear" title="date picker">date picker</a>').bind(c.clickEvent,function(d){d.preventDefault();if(!c.disabled){b.input.trigger("datebox",{method:"open"})}setTimeout(function(){a(d.target).closest("a").removeClass(a.mobile.activeBtnClass)},300)}).appendTo(f).buttonMarkup({icon:"grid",iconpos:"notext",corners:true,shadow:true}).css({"vertical-align":"middle","float":"right"}),j=d.closest(".ui-page"),k=typeof a.mobile.ns!=="undefined"?a.mobile.ns:"",l=a("<div data-"+k+"role='dialog' class='ui-dialog-datebox' data-"+k+"theme='"+(c.forceInheritTheme===false?c.pickPageTheme:e)+"' ><div data-"+k+"role='header' data-"+k+"backbtn='false' data-"+k+"theme='a'><div class='ui-title'>PlaceHolder</div></div><div data-"+k+"role='content'></div></div>").appendTo(a.mobile.pageContainer).page().css("minHeight","0px").css("zIndex",c.zindex).addClass(c.transition),m=l.find(".ui-title"),n=l.find(".ui-content"),o="ontouchstart"in window,p=o?"touchstart":"mousedown",q=o?"touchmove":"mousemove",r=o?"touchend":"mouseup",s=false,t=false,u=false,v=false,w=false,x=0;c.theme=e;if(c.forceInheritTheme){c.pickPageTheme=e;c.pickPageInputTheme=e;c.pickPageButtonTheme=e}if(c.defaultPickerValue===false&&c.defaultDate!==false){c.defaultPickerValue=c.defaultDate}if(c.numberInputEnhance===true){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)){c.internalInputType="number"}}a("label[for='"+d.attr("id")+"']").addClass("ui-input-text").css("verticalAlign","middle");if(c.mode==="timeflipbox"){c.lang[c.useLang].headerFormat=" "}if(c.noButtonFocusMode||c.useInline||c.noButton){i.hide()}f.bind(c.clickEvent,function(){if(!c.disabled&&c.noButtonFocusMode){d.trigger("datebox",{method:"open"})}});d.removeClass("ui-corner-all ui-shadow-inset").focus(function(){if(!c.disabled){f.addClass("ui-focus");if(c.noButtonFocusMode){f.addClass("ui-focus");d.trigger("datebox",{method:"open"})}}d.removeClass("ui-focus")}).blur(function(){f.removeClass("ui-focus");d.removeClass("ui-focus")}).change(function(){b.theDate=b._makeDate(b.input.val());b._update()});d.bind("datebox",b._dateboxHandler);l.find(".ui-header a").bind(c.clickEvent,function(a){a.preventDefault();a.stopImmediatePropagation();b.input.trigger("datebox",{method:"close",fromCloseButton:true})});a.extend(b,{pickPage:l,thisPage:j,pickPageContent:n,pickPageTitle:m,input:d,theDate:g,initDate:h,focusedEl:f,touch:o,START_DRAG:p,MOVE_DRAG:q,END_DRAG:r,dragMove:s,dragStart:t,dragEnd:u,dragPos:v});if(typeof a.event.special.mousewheel!=="undefined"){c.wheelExists=true}b._buildPage();if(c.swipeEnabled){a(document).bind(b.MOVE_DRAG,function(a){if(b.dragMove){if(c.mode==="slidebox"){b.dragEnd=b.touch?a.originalEvent.changedTouches[0].pageX:a.pageX;b.dragTarget.css("marginLeft",b.dragPos+b.dragEnd-b.dragStart+"px");a.preventDefault();a.stopPropagation();return false}else{if(c.mode==="flipbox"||c.mode==="timeflipbox"){b.dragEnd=b.touch?a.originalEvent.changedTouches[0].pageY:a.pageY;b.dragTarget.css("marginTop",b.dragPos+b.dragEnd-b.dragStart+"px");a.preventDefault();a.stopPropagation();return false}else{if(c.mode==="durationbox"||c.mode==="timebox"||c.mode==="datebox"){b.dragEnd=b.touch?a.originalEvent.changedTouches[0].pageY:a.pageY;if((b.dragEnd-b.dragStart)%2===0){x=(b.dragEnd-b.dragStart)/-2;if(x<b.dragPos){b._offset(b.dragTarget,-1*(b.dragTarget==="i"?c.minuteStep:1))}else{if(x>b.dragPos){b._offset(b.dragTarget,b.dragTarget==="i"?c.minuteStep:1)}}b.dragPos=x}a.preventDefault();a.stopPropagation();return false}}}}});a(document).bind(b.END_DRAG,function(a){if(b.dragMove){b.dragMove=false;if(c.mode==="slidebox"){if(b.dragEnd!==false&&Math.abs(b.dragStart-b.dragEnd)>25){a.preventDefault();a.stopPropagation();switch(b.dragTarget.parent().jqmData("rowtype")){case"y":b._offset("y",parseInt((b.dragStart-b.dragEnd)/84,10));break;case"m":b._offset("m",parseInt((b.dragStart-b.dragEnd)/51,10));break;case"d":b._offset("d",parseInt((b.dragStart-b.dragEnd)/32,10));break;case"h":b._offset("h",parseInt((b.dragStart-b.dragEnd)/32,10));break;case"i":b._offset("i",parseInt((b.dragStart-b.dragEnd)/32,10));break}}}else{if(c.mode==="flipbox"||c.mode==="timeflipbox"){if(b.dragEnd!==false){a.preventDefault();a.stopPropagation();var d=b.dragTarget.parent().parent().jqmData("field"),e=parseInt((b.dragStart-b.dragEnd)/30,10);b._offset(d,e*(d==="i"?c.minuteStep:1))}}}b.dragStart=false;b.dragEnd=false}})}if(d.is(":disabled")){b.disable()}if(c.disableManualInput===true){d.attr("readonly",true)}a(document).bind("orientationchange",function(a){d.trigger("orientationchange")});if(c.resizeListener===true){a(window).bind("resize",function(a){d.trigger("orientationchange")})}d.bind("orientationchange",b._orientChange);a(document).trigger("dateboxaftercreate")},_makeElement:function(a,b){var c=this,d=false,e=false;e=a.clone();if("attr"in b){for(d in b.attr){e.jqmData(d,b.attr[d])}}return e},_eventEnterValue:function(a){var b=this,c=b.options,d=false;if(a.val()!==""&&b._isInt(a.val())){switch(a.jqmData("field")){case"m":b.theDate.setMonth(parseInt(a.val(),10)-1);break;case"d":b.theDate.setDate(parseInt(a.val(),10));break;case"y":b.theDate.setFullYear(parseInt(a.val(),10));break;case"i":b.theDate.setMinutes(parseInt(a.val(),10));break;case"h":d=parseInt(a.val(),10);if(d===12){if((c.lang[c.useLang].timeFormat===12||c.timeFormatOverride===12)&&b.pickerMeri.val()===c.meridiemLetters[0]){d=0}}b.theDate.setHours(d);break}b._update()}},_buildInternals:function(){var b=this,c=b.options,d,e,f,g=a("<div><a href='#'></a></div>"),h=a("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden pop ui-body-"+c.pickPageTheme}).css("zIndex",c.zindex),i=a("<input type='"+c.internalInputType+"' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+c.pickPageInputTheme),j=a("<input type='text' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+c.pickPageInputTheme),k=a("<div>",{"class":"ui-datebox-controls"}),l=a("<div class='ui-overlay-shadow'><ul></ul></div>"),m,n,o,p,q,r,s,t,u,v,w,x;b.calNoNext=false;b.calNoPrev=false;b.setButton=false;if(c.fieldsOrderOverride===false){switch(c.mode){case"timebox":case"timeflipbox":c.fieldsOrder=c.lang[c.useLang].timeFieldOrder;break;case"slidebox":c.fieldsOrder=c.lang[c.useLang].slideFieldOrder;break;default:c.fieldsOrder=c.lang[c.useLang].dateFieldOrder}}else{c.fieldsOrder=c.fieldsOrderOverride}if(c.timeOutputOverride!==false){c.timeOutput=c.timeOutputOverride}else{if(c.timeFormatOverride===false){c.timeOutput=c.timeFormats[c.lang[c.useLang].timeFormat]}else{c.timeOutput=c.timeFormats[c.timeFormatOverride]}}if(c.dateFormat!==false){c.dateOutput=c.dateFormat}else{if("dateFormat"in c.lang[c.useLang]){c.dateOutput=c.lang[c.useLang].dateFormat}else{c.dateOutput=c.defaultDateFormat}}b.pickerContent.html("");if(c.mode==="datebox"||c.mode==="timebox"){q=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(b.pickerContent).find("h4");m=k.clone().appendTo(b.pickerContent);n=k.clone().appendTo(b.pickerContent);o=k.clone().appendTo(b.pickerContent);p=k.clone().appendTo(b.pickerContent);if(c.mode==="timebox"){q.parent().html("")}u=b._makeElement(i,{attr:{field:"m"}}).keyup(function(){b._eventEnterValue(a(this))});v=b._makeElement(i,{attr:{field:"d"}}).keyup(function(){b._eventEnterValue(a(this))});w=b._makeElement(i,{attr:{field:"y"}}).keyup(function(){b._eventEnterValue(a(this))});r=b._makeElement(i,{attr:{field:"h"}}).keyup(function(){b._eventEnterValue(a(this))});s=b._makeElement(i,{attr:{field:"i"}}).keyup(function(){b._eventEnterValue(a(this))});t=b._makeElement(j,{attr:{field:"a"}}).keyup(function(){b._eventEnterValue(a(this))});if(c.wheelExists){w.bind("mousewheel",function(a,c){a.preventDefault();b._offset("y",c<0?-1:1)});u.bind("mousewheel",function(a,c){a.preventDefault();b._offset("m",c<0?-1:1)});v.bind("mousewheel",function(a,c){a.preventDefault();b._offset("d",c<0?-1:1)});r.bind("mousewheel",function(a,c){a.preventDefault();b._offset("h",c<0?-1:1)});s.bind("mousewheel",function(a,d){a.preventDefault();b._offset("i",(d<0?-1:1)*c.minuteStep)});t.bind("mousewheel",function(a,c){a.preventDefault();b._offset("a",c)})}for(d=0;d<=c.fieldsOrder.length;d++){if(c.fieldsOrder[d]==="y"){w.appendTo(n)}if(c.fieldsOrder[d]==="m"){u.appendTo(n)}if(c.fieldsOrder[d]==="d"){v.appendTo(n)}if(c.fieldsOrder[d]==="h"){r.appendTo(n)}if(c.fieldsOrder[d]==="i"){s.appendTo(n)}if(c.fieldsOrder[d]==="a"&&(c.lang[c.useLang].timeFormat===12||c.timeFormatOverride===12)){t.appendTo(n)}}if(c.swipeEnabled){n.find("input").bind(b.START_DRAG,function(c){if(!b.dragMove){b.dragMove=true;b.dragTarget=a(this).jqmData("field");b.dragPos=0;b.dragStart=b.touch?c.originalEvent.changedTouches[0].pageY:c.pageY;b.dragEnd=false;c.stopPropagation()}})}if(c.noSetButton===false){b.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(p).buttonMarkup({theme:c.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(c.clickEvent,function(a){a.preventDefault();if(c.mode==="timebox"){b.input.trigger("datebox",{method:"set",value:b._formatTime(b.theDate),date:b.theDate})}else{b.input.trigger("datebox",{method:"set",value:b._formatDate(b.theDate),date:b.theDate})}b.input.trigger("datebox",{method:"close"})})}for(d=0;d<b.options.fieldsOrder.length;d++){if(c.fieldsOrder[d]!=="a"||c.lang[c.useLang].timeFormat===12||c.timeFormatOverride===12){g.clone().appendTo(m).buttonMarkup({theme:c.pickPageButtonTheme,icon:"plus",iconpos:"bottom",corners:true,shadow:true}).jqmData("field",c.fieldsOrder[d]).bind(c.clickEvent,function(d){d.preventDefault();b._offset(a(this).jqmData("field"),a(this).jqmData("field")==="i"?c.minuteStep:1)});g.clone().appendTo(o).buttonMarkup({theme:c.pickPageButtonTheme,icon:"minus",iconpos:"top",corners:true,shadow:true}).jqmData("field",c.fieldsOrder[d]).bind(c.clickEvent,function(d){d.preventDefault();b._offset(a(this).jqmData("field"),-1*(a(this).jqmData("field")==="i"?c.minuteStep:1))})}}a.extend(b,{controlsHeader:q,pickerDay:v,pickerMon:u,pickerYar:w,pickerHour:r,pickerMins:s,pickerMeri:t});b.pickerContent.appendTo(b.thisPage)}if(c.mode==="durationbox"){m=k.clone().removeClass("ui-datebox-controls").addClass("ui-datebox-scontrols").appendTo(b.pickerContent);n=m.clone().appendTo(b.pickerContent);o=m.clone().appendTo(b.pickerContent);p=k.clone().appendTo(b.pickerContent);v=i.removeClass("ui-datebox-input").clone().keyup(function(){if(a(this).val()!==""){b._updateduration()}});r=v.clone().keyup(function(){if(a(this).val()!==""){b._updateduration()}});s=v.clone().keyup(function(){if(a(this).val()!==""){b._updateduration()}});x=v.clone().keyup(function(){if(a(this).val()!==""){b._updateduration()}});if(c.wheelExists){v.bind("mousewheel",function(a,d){a.preventDefault();b._offset("d",(d<0?-1:1)*c.durationSteppers.d)});r.bind("mousewheel",function(a,d){a.preventDefault();b._offset("h",(d<0?-1:1)*c.durationSteppers.h)});s.bind("mousewheel",function(a,d){a.preventDefault();b._offset("i",(d<0?-1:1)*c.durationSteppers.i)});x.bind("mousewheel",function(a,d){a.preventDefault();b._offset("s",(d<0?-1:1)*c.durationSteppers.s)})}for(d=0;d<c.durationOrder.length;d++){switch(c.durationOrder[d]){case"d":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","d").append(v).appendTo(n).prepend("<label>"+c.lang[c.useLang].durationLabel[0]+"</label>");break;case"h":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","h").append(r).appendTo(n).prepend("<label>"+c.lang[c.useLang].durationLabel[1]+"</label>");break;case"i":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","i").append(s).appendTo(n).prepend("<label>"+c.lang[c.useLang].durationLabel[2]+"</label>");break;case"s":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","s").append(x).appendTo(n).prepend("<label>"+c.lang[c.useLang].durationLabel[3]+"</label>");break}}if(c.swipeEnabled){n.find("input").bind(b.START_DRAG,function(c){if(!b.dragMove){b.dragMove=true;b.dragTarget=a(this).parent().jqmData("field");b.dragPos=0;b.dragStart=b.touch?c.originalEvent.changedTouches[0].pageY:c.pageY;b.dragEnd=false;c.stopPropagation()}})}if(c.noSetButton===false){b.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(p).buttonMarkup({theme:c.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(c.clickEvent,function(a){a.preventDefault();b.input.trigger("datebox",{method:"set",value:b._formatTime(b.theDate),date:b.theDate});b.input.trigger("datebox",{method:"close"})})}for(d=0;d<c.durationOrder.length;d++){g.clone().appendTo(m).buttonMarkup({theme:c.pickPageButtonTheme,icon:"plus",iconpos:"bottom",corners:true,shadow:true}).jqmData("field",c.durationOrder[d]).bind(c.clickEvent,function(d){d.preventDefault();b._offset(a(this).jqmData("field"),c.durationSteppers[a(this).jqmData("field")])});g.clone().appendTo(o).buttonMarkup({theme:c.pickPageButtonTheme,icon:"minus",iconpos:"top",corners:true,shadow:true}).jqmData("field",c.durationOrder[d]).bind(c.clickEvent,function(d){d.preventDefault();b._offset(a(this).jqmData("field"),-1*c.durationSteppers[a(this).jqmData("field")])})}a.extend(b,{pickerHour:r,pickerMins:s,pickerDay:v,pickerSecs:x});b.pickerContent.appendTo(b.thisPage)}if(c.mode==="slidebox"){q=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(b.pickerContent).find("h4");n=a("<div>").addClass("ui-datebox-slide").appendTo(b.pickerContent);p=a("<div>",{"class":"ui-datebox-controls"}).appendTo(b.pickerContent);if(c.noSetButton===false){b.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(p).buttonMarkup({theme:c.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(c.clickEvent,function(a){a.preventDefault();b.input.trigger("datebox",{method:"set",value:b._formatDate(b.theDate),date:b.theDate});b.input.trigger("datebox",{method:"close"})})}a.extend(b,{controlsHeader:q,controlsInput:n});b.pickerContent.appendTo(b.thisPage)}if(c.mode==="flipbox"||c.mode==="timeflipbox"){q=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(b.pickerContent).find("h4");n=a("<div>",{"class":"ui-datebox-flipcontent"}).appendTo(b.pickerContent);m=a("<div>",{"class":"ui-datebox-flipcenter ui-overlay-shadow"}).appendTo(b.pickerContent);p=k.clone().appendTo(b.pickerContent);v=b._makeElement(l,{attr:{field:"d"}});u=b._makeElement(l,{attr:{field:"m"}});w=b._makeElement(l,{attr:{field:"y"}});r=b._makeElement(l,{attr:{field:"h"}});s=b._makeElement(l,{attr:{field:"i"}});t=b._makeElement(l,{attr:{field:"a"}});if(c.wheelExists){w.bind("mousewheel",function(a,c){a.preventDefault();b._offset("y",c<0?-1:1)});u.bind("mousewheel",function(a,c){a.preventDefault();b._offset("m",c<0?-1:1)});v.bind("mousewheel",function(a,c){a.preventDefault();b._offset("d",c<0?-1:1)});r.bind("mousewheel",function(a,c){a.preventDefault();b._offset("h",c<0?-1:1)});s.bind("mousewheel",function(a,d){a.preventDefault();b._offset("i",(d<0?-1:1)*c.minuteStep)});t.bind("mousewheel",function(a,c){a.preventDefault();b._offset("a",c)});m.bind("mousewheel",function(d,e){d.preventDefault();if(c.fieldsOrder.length===3){f=c.fieldsOrder[parseInt((d.pageX-a(d.currentTarget).offset().left)/87,10)]}else{if(c.fieldsOrder.length===2){f=c.fieldsOrder[parseInt((d.pageX-a(d.currentTarget).offset().left)/130,10)]}}b._offset(f,(e<0?-1:1)*(f==="i"?c.minuteStep:1))})}for(d=0;d<=c.fieldsOrder.length;d++){if(c.fieldsOrder[d]==="y"){w.appendTo(n)}if(c.fieldsOrder[d]==="m"){u.appendTo(n)}if(c.fieldsOrder[d]==="d"){v.appendTo(n)}if(c.fieldsOrder[d]==="h"){r.appendTo(n)}if(c.fieldsOrder[d]==="i"){s.appendTo(n)}if(c.fieldsOrder[d]==="a"&&(c.lang[c.useLang].timeFormat===12||c.timeFormatOverride===12)){t.appendTo(n)}}if(c.swipeEnabled){n.find("ul").bind(b.START_DRAG,function(c,d){if(!b.dragMove){if(typeof d!=="undefined"){c=d}b.dragMove=true;b.dragTarget=a(this).find("li").first();b.dragPos=parseInt(b.dragTarget.css("marginTop").replace(/px/i,""),10);b.dragStart=b.touch?c.originalEvent.changedTouches[0].pageY:c.pageY;b.dragEnd=false;c.stopPropagation();c.preventDefault()}});m.bind(b.START_DRAG,function(d){if(!b.dragMove){b.dragTarget=b.touch?d.originalEvent.changedTouches[0].pageX-a(d.currentTarget).offset().left:d.pageX-a(d.currentTarget).offset().left;if(c.fieldsOrder.length===3){a(b.controlsInput.find("ul").get(parseInt(b.dragTarget/87,10))).trigger(b.START_DRAG,d)}else{if(c.fieldsOrder.length===2){a(b.controlsInput.find("ul").get(parseInt(b.dragTarget/130,10))).trigger(b.START_DRAG,d)}}}})}if(c.noSetButton===false){b.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(p).buttonMarkup({theme:c.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(c.clickEvent,function(a){a.preventDefault();if(c.mode==="timeflipbox"){b.input.trigger("datebox",{method:"set",value:b._formatTime(b.theDate),date:b.theDate})}else{b.input.trigger("datebox",{method:"set",value:b._formatDate(b.theDate),date:b.theDate})}b.input.trigger("datebox",{method:"close"})})}a.extend(b,{controlsHeader:q,controlsInput:n,pickerDay:v,pickerMon:u,pickerYar:w,pickerHour:r,pickerMins:s,pickerMeri:t});b.pickerContent.appendTo(b.thisPage)}if(c.mode==="calbox"){q=a("<div>",{"class":"ui-datebox-gridheader"}).appendTo(b.pickerContent);p=a("<div>",{"class":"ui-datebox-grid"}).appendTo(b.pickerContent);n=a("<div class='ui-datebox-gridlabel'><h4>Uninitialized</h4></div>").appendTo(q).find("h4");if(c.swipeEnabled){b.pickerContent.bind("swipeleft",function(){if(!b.calNoNext){b._offset("m",1)}}).bind("swiperight",function(){if(!b.calNoPrev){b._offset("m",-1)}})}if(c.wheelExists){b.pickerContent.bind("mousewheel",function(a,c){a.preventDefault();if(c>0&&!b.calNoNext){if(b.theDate.getDate()>28){b.theDate.setDate(1)}b._offset("m",1)}if(c<0&&!b.calNoPrev){if(b.theDate.getDate()>28){b.theDate.setDate(1)}b._offset("m",-1)}})}a("<div class='ui-datebox-gridplus"+(c.lang[c.useLang].isRTL===true?"-rtl":"")+"'><a href='#'>Next Month</a></div>").prependTo(q).buttonMarkup({theme:c.pickPageButtonTheme,icon:"plus",inline:true,iconpos:"notext",corners:true,shadow:true}).bind(c.clickEvent,function(a){a.preventDefault();if(!b.calNoNext){if(b.theDate.getDate()>28){b.theDate.setDate(1)}b._offset("m",1)}});a("<div class='ui-datebox-gridminus"+(c.lang[c.useLang].isRTL===true?"-rtl":"")+"'><a href='#'>Prev Month</a></div>").prependTo(q).buttonMarkup({theme:c.pickPageButtonTheme,icon:"minus",inline:true,iconpos:"notext",corners:true,shadow:true}).bind(c.clickEvent,function(a){a.preventDefault();if(!b.calNoPrev){if(b.theDate.getDate()>28){b.theDate.setDate(1)}b._offset("m",-1)}});if(c.calTodayButton===true){b.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(b.pickerContent).buttonMarkup({theme:c.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(c.clickEvent,function(a){a.preventDefault();b.theDate=new Date;b.theDate=new Date(b.theDate.getFullYear(),b.theDate.getMonth(),b.theDate.getDate(),0,0,0,0);b.input.trigger("datebox",{method:"doset"})})}a.extend(b,{controlsInput:n,controlsSet:p});b.pickerContent.appendTo(b.thisPage)}},_buttonsTitle:function(){var a=this,b=this.options;if(b.titleDialogLabel===false){switch(b.mode){case"timebox":case"timeflipbox":a.pickPageTitle.html(b.lang[b.useLang].titleTimeDialogLabel);break;default:a.pickPageTitle.html(b.lang[b.useLang].titleDateDialogLabel);break}}else{a.pickPageTitle.html(b.titleDialogLabel)}if(a.setButton!==false){switch(b.mode){case"timebox":case"timeflipbox":a.setButton.find(".ui-btn-text").html(b.lang[b.useLang].setTimeButtonLabel);break;case"durationbox":a.setButton.find(".ui-btn-text").html(b.lang[b.useLang].setDurationButtonLabel);break;case"calbox":a.setButton.find(".ui-btn-text").html(b.lang[b.useLang].calTodayButtonLabel);break;default:a.setButton.find(".ui-btn-text").html(b.lang[b.useLang].setDateButtonLabel);break}}},_buildPage:function(){var b=this,c=b.options,d=a("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+c.transition+" ui-body-"+c.pickPageTheme}).css("zIndex",c.zindex),e=a("<div>",{"class":"ui-datebox-screen ui-datebox-hidden"+(c.useModal?" ui-datebox-screen-modal":"")}).css({"z-index":c.zindex-1}).appendTo(b.thisPage).bind(c.clickEvent,function(a){a.preventDefault();b.input.trigger("datebox",{method:"close"})});if(c.noAnimation){d.removeClass(c.transition)}a.extend(b,{pickerContent:d,screen:e});b._buildInternals();if(c.useInline||c.useInlineBlind){b.input.parent().parent().append(b.pickerContent);if(c.useInlineHideInput){b.input.parent().hide()}b.input.trigger("change");b.pickerContent.removeClass("ui-datebox-hidden")}else{if(c.centerWindow&&c.useInlineHideInput){b.input.parent().hide()}}if(c.useInline){b.pickerContent.addClass("ui-datebox-inline");b.open()}if(c.useInlineBlind){b.pickerContent.addClass("ui-datebox-inlineblind");b.pickerContent.hide()}},hardreset:function(){this._buildInternals();this.refresh();this._buttonsTitle()},refresh:function(){if(this.options.useInline===true){this.input.trigger("change")}this._update()},open:function(){if(this.options.openCallback!==false){if(a.isFunction(this.options.openCallback())&&!this.options.openCallback()){return false}else{var b=new Function(this.options.openCallback);if(!b()){return false}}}var c=this,d=this.options,e=c.focusedEl.offset(),f=c.pickerContent.outerHeight(),g=c.pickerContent.innerWidth(),h=e.top+c.focusedEl.outerHeight()/2-f/2,i=e.left+c.focusedEl.outerWidth()/2-g/2,j=d.noAnimation?"none":d.transition,k=a(window).scrollTop(),l=a(window).scrollLeft(),m=a(document).width(),n=a(window).height(),o;c._buttonsTitle();if(this.options.useInlineBlind){this.pickerContent.slideDown();return false}if(this.options.useInline){return true}if(this.pickPage.is(":visible")){return false}this.theDate=this._makeDate(this.input.val());this._update();this.input.blur();if(i+g>a(document).width()){i=a(document).width()-g-1}if(i<0){i=0}if(d.centerWindow){i=a(document).width()/2-g/2}if(f+h>a(document).height()){h=a(document).height()-(f+2)}if(h<45){h=45}if(a(document).width()>400&&!d.useDialogForceTrue||d.useDialogForceFalse||d.fullScreen){d.useDialog=false;if(d.nestedBox===true&&d.fullScreen===false){if(f===0){f=250;h=e.top+c.focusedEl.outerHeight()/2-f/2}o=a(".ui-page-active").first();a(o).append(c.pickerContent);a(o).append(c.screen)}if(d.fullScreenAlways===false||a(document).width()>399){if(d.useModal===true){c.screen.fadeIn("slow")}else{c.screen.removeClass("ui-datebox-hidden")}}if(d.fullScreenAlways===true||d.fullScreen===true&&a(document).width()<400){c.pickerContent.addClass("ui-overlay-shadow in").css({position:"absolute","text-align":"center",top:k,left:l,height:n,width:m,border:"0px !important"}).removeClass("ui-datebox-hidden")}else{c.pickerContent.addClass("ui-overlay-shadow in").css({position:"absolute",top:h,left:i}).removeClass("ui-datebox-hidden")}}else{c.thisPage.unbind("pagehide.remove");d.useDialog=true;c.pickPageContent.append(c.pickerContent);c.pickerContent.css({top:"auto",left:"auto",marginLeft:"auto",marginRight:"auto"}).removeClass("ui-overlay-shadow ui-datebox-hidden");a.mobile.changePage(c.pickPage,{transition:j})}},close:function(b){var c=this,d;if(this.options.useInlineBlind){this.pickerContent.slideUp();return false}if(c.options.useInline){return true}if(c.options.useDialog){if(!b){a(c.pickPage).dialog("close")}if(!c.thisPage.jqmData("page").options.domCache){c.thisPage.bind("pagehide.remove",function(){a(c).remove()})}c.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",c.options.zindex);c.thisPage.append(c.pickerContent)}else{if(c.options.useModal){c.screen.fadeOut("slow")}else{c.screen.addClass("ui-datebox-hidden")}c.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",c.options.zindex).removeClass("in")}c.focusedEl.removeClass("ui-focus");if(c.options.closeCallback!==false){if(a.isFunction(c.options.closeCallback)){c.options.closeCallback(c.theDate,c)}else{d=new Function(c.options.closeCallback);d(c.theDate,c)}}},disable:function(){this.element.attr("disabled",true);this.element.parent().addClass("ui-disabled");this.options.disabled=true;this.element.blur();this.input.trigger("datebox",{method:"disable"})},enable:function(){this.element.attr("disabled",false);this.element.parent().removeClass("ui-disabled");this.options.disabled=false;this.input.trigger("datebox",{method:"enable"})},_setOption:function(b,c){var d=["minYear","maxYear","afterToday","beforeToday","maxDays","minDays","highDays","highDates","blackDays","blackDates","enableDates"];a.Widget.prototype._setOption.apply(this,arguments);if(a.inArray(b,d)>-1){this._refresh()}else{this.hardreset()}}});a(document).bind("pagebeforecreate",function(b){a(":jqmData(role='datebox')",b.target).each(function(){a(this).prop("type","text")})});a(document).bind("pagecreate create",function(b){a(document).trigger("dateboxbeforecreate");a(":jqmData(role='datebox')",b.target).each(function(){if(typeof a(this).data("datebox")==="undefined"){a(this).datebox()}})})})(jQuery);eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(c--)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}];e=function(){return"\\w+"};c=1}while(c--)if(d[c])a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]);return a}(";3(X.1M)(6($){$.7.2=6(h){3(5.Q==0)8 5;3(R U[0]=='1f'){3(5.Q>1){l i=U;8 5.N(6(){$.7.2.14($(5),i)})};$.7.2[U[0]].14(5,$.27(U).26(1)||[]);8 5};l h=$.L({},$.7.2.D,h||{});$('21').1D('2-S').V('2-S').1i($.7.2.15);3($.7.2.D.12){$.7.2.1s($.7.2.D.12);$.7.2.D.12=11};5.1D('.2-1a').V('2-1a').N(6(){X.2=(X.2||0)+1;l e=X.2;l g={e:5,E:$(5),P:$(5).P()};3(R h=='1W')h={m:h};l o=$.L({},$.7.2.D,h||{},($.1p?g.E.1p():($.2t?g.E.Z():11))||{},{});3(!(o.m>0)){o.m=g.E.K('2e');3(!(o.m>0)){o.m=(u(g.e.1o.B(/\\b(m|2a)\\-([0-9]+)\\b/q)||['']).B(/[0-9]+/q)||[''])[0];3(!(o.m>0))o.m=-1;1Z o.m=u(o.m).B(/[0-9]+/q)[0]}};o.m=18 1X(o.m);o.j=o.j||g.E.K('j')||'';3(!o.j){o.j=(g.e.1o.B(/\\b(j\\-[\\w\\|]+)\\b/q))||'';o.j=18 u(o.j).t(/^(j|1e)\\-/i,'')};$.L(g,o||{});g.A=$.L({},$.7.2.D.A,g.A);$.L(g,{n:0,J:[],2c:[],19:g.e.I||'2'+u(e),1k:6(z){8 g.19+(z>0?'1U'+u(z):'')},G:6(a,b){l c=g[a],k=$(b).K('k');3(c){l d=c(b,k,g);3(d!=11)8 d}8 1h}});3(u(g.j).Q>1){g.j=g.j.t(/\\W+/g,'|').t(/^\\W|\\W$/g,'');g.1w=18 2h('\\\\.('+(g.j?g.j:'')+')$','q')};g.M=g.19+'25';g.E.1j('<O T=\"2-1j\" I=\"'+g.M+'\"></O>');g.1l=$('#'+g.M+'');g.e.H=g.e.H||'p'+e+'[]';3(!g.C){g.1l.1d('<O T=\"2-C\" I=\"'+g.M+'1m\"></O>');g.C=$('#'+g.M+'1m')};g.C=$(g.C);g.10=6(c,d){g.n++;c.2=g;3(d>0)c.I=c.H='';3(d>0)c.I=g.1k(d);c.H=u(g.1n.t(/\\$H/q,$(g.P).K('H')).t(/\\$I/q,$(g.P).K('I')).t(/\\$g/q,e).t(/\\$i/q,d));3((g.m>0)&&((g.n-1)>(g.m)))c.16=1h;g.17=g.J[d]=c;c=$(c);c.1g('').K('k','')[0].k='';c.V('2-1a');c.2z(6(){$(5).1O();3(!g.G('1R',5,g))8 y;l a='',v=u(5.k||'');3(g.j&&v&&!v.B(g.1w))a=g.A.1q.t('$1e',u(v.B(/\\.\\w{1,4}$/q)));1r(l f 29 g.J)3(g.J[f]&&g.J[f]!=5)3(g.J[f].k==v)a=g.A.1t.t('$p',v.B(/[^\\/\\\\]+$/q));l b=$(g.P).P();b.V('2');3(a!=''){g.1u(a);g.n--;g.10(b[0],d);c.1v().2d(b);c.F();8 y};$(5).1x({1y:'1N',1z:'-1P'});c.1Q(b);g.1A(5,d);g.10(b[0],d+1);3(!g.G('1S',5,g))8 y});$(c).Z('2',g)};g.1A=6(c,d){3(!g.G('1T',c,g))8 y;l r=$('<O T=\"2-1V\"></O>'),v=u(c.k||''),a=$('<1B T=\"2-1C\" 1C=\"'+g.A.Y.t('$p',v)+'\">'+g.A.p.t('$p',v.B(/[^\\/\\\\]+$/q)[0])+'</1B>'),b=$('<a T=\"2-F\" 1Y=\"#'+g.M+'\">'+g.A.F+'</a>');g.C.1d(r.1d(b,' ',a));b.1E(6(){3(!g.G('20',c,g))8 y;g.n--;g.17.16=y;g.J[d]=11;$(c).F();$(5).1v().F();$(g.17).1x({1y:'',1z:''});$(g.17).13().1g('').K('k','')[0].k='';3(!g.G('22',c,g))8 y;8 y});3(!g.G('23',c,g))8 y};3(!g.2)g.10(g.e,0);g.n++;g.E.Z('2',g)})};$.L($.7.2,{13:6(){l a=$(5).Z('2');3(a)a.C.24('a.2-F').1E();8 $(5)},15:6(a){a=(R(a)=='1f'?a:'')||'1F';l o=[];$('1b:p.2').N(6(){3($(5).1g()=='')o[o.Q]=5});8 $(o).N(6(){5.16=1h}).V(a)},1c:6(a){a=(R(a)=='1f'?a:'')||'1F';8 $('1b:p.'+a).28(a).N(6(){5.16=y})},S:{},1s:6(b,c,d){l e,k;d=d||[];3(d.1G.1H().1I(\"1J\")<0)d=[d];3(R(b)=='6'){$.7.2.15();k=b.14(c||X,d);1K(6(){$.7.2.1c()},1L);8 k};3(b.1G.1H().1I(\"1J\")<0)b=[b];1r(l i=0;i<b.Q;i++){e=b[i]+'';3(e)(6(a){$.7.2.S[a]=$.7[a]||6(){};$.7[a]=6(){$.7.2.15();k=$.7.2.S[a].14(5,U);1K(6(){$.7.2.1c()},1L);8 k}})(e)}}});$.7.2.D={j:'',m:-1,1n:'$H',A:{F:'x',1q:'2f 2g 2b a $1e p.\\2i 2j...',p:'$p',Y:'2k Y: $p',1t:'2l p 2m 2n 2o Y:\\n$p'},12:['1i','2p','2q','2r','2s'],1u:6(s){2u(s)}};$.7.13=6(){8 5.N(6(){2v{5.13()}2w(e){}})};$(6(){$(\"1b[2x=p].2y\").2()})})(1M);",62,160,"||MultiFile|if||this|function|fn|return|||||||||||accept|value|var|max|||file|gi|||replace|String||||false||STRING|match|list|options||remove|trigger|name|id|slaves|attr|extend|wrapID|each|div|clone|length|typeof|intercepted|class|arguments|addClass||window|selected|data|addSlave|null|autoIntercept|reset|apply|disableEmpty|disabled|current|new|instanceKey|applied|input|reEnableEmpty|append|ext|string|val|true|submit|wrap|generateID|wrapper|_list|namePattern|className|metadata|denied|for|intercept|duplicate|error|parent|rxAccept|css|position|top|addToList|span|title|not|click|mfD|constructor|toString|indexOf|Array|setTimeout|1000|jQuery|absolute|blur|3000px|after|onFileSelect|afterFileSelect|onFileAppend|_F|label|number|Number|href|else|onFileRemove|form|afterFileRemove|afterFileAppend|find|_wrap|slice|makeArray|removeClass|in|limit|select|files|prepend|maxlength|You|cannot|RegExp|nTry|again|File|This|has|already|been|ajaxSubmit|ajaxForm|validate|valid|meta|alert|try|catch|type|multi|change".split("|"),0,{}));jQuery(document).ready(function(){try{Typekit.load()}catch(a){}var b=MyAjax.sibson_nonce_for_ajax;jQuery(".loaddialog").live("click",function(){type=$(this).data("dialogtype");id=$(this).data("id");pagetype=$(this).data("pagetype");title=$(this).data("title");classtype=$(this).data("classtype");postid=$(this).data("postid");description=$(this).data("description");indicatortype=$(this).data("indicatortype");jQuery("#dialog_heading").html(title);jQuery("#dialog_content").html("Loading...");jQuery.post(MyAjax.ajaxurl,{action:"ajax_fetch_dialog_content",theType:type,theId:id,thePageType:pagetype,theClassType:classtype,post_id:postid,Nonce:b,desc:description,indtype:indicatortype},function(a){jQuery("#dialog_content").html(a);$("#dialog_content a.button").buttonMarkup();$("#post_form").formToWizard();$("#post_form").trigger("create");$("#dialog_content").trigger("create");if($("#postcontent").length){jQuery("#postcontent").css("height","100%").css("width","100%").htmlbox({idir:MyAjax.imageUrl+"/images/",toolbars:[["separator","cut","copy","paste","separator","undo","redo","separator","bold","italic","underline","separator","ol","ul","indent","outdent","separator","link","unlink"],["separator","code","separator","formats","fontsize","fontfamily","separator","fontcolor","highlight"]],icons:"default",skin:"red"})}$("#image_upload").customFileInput();if(type=="people"){$("#searchBox").textinput();$("#searchBox").suggest(MyAjax.ajaxurl+"?action=ajax_search_people&tax=person_id&Nonce="+b,{multiple:true,multipleSep:","})}if(type=="groups"){$("#groupsearchBox").textinput();$("#groupsearchBox").suggest(MyAjax.ajaxurl+"?action=ajax_search_group&Nonce="+b,{multiple:true,multipleSep:",",resultsId:"groupBadgeList"})}if(type=="reuse"||type=="groupform"){$("#searchBoxSelectable").textinput();$("#searchBoxSelectable").suggest(MyAjax.ajaxurl+"?action=ajax_search_selectable&Nonce="+b,{multiple:true,multipleSep:",",resultsId:"selectableList"})}})});jQuery(".cell").live("change",function(){var a=$(this).val();var b=$(this).data("subject");if(b=="maths"||b=="writing"){switch(a){case"1b":$(this).val("1 Basic");break;case"1 b":$(this).val("1 Basic");break;case"1B":$(this).val("1 Basic");break;case"1 B":$(this).val("1 Basic");break;case"1 Basic":$(this).val("1 Basic");break;case"1p":$(this).val("1 Proficient");break;case"1 p":$(this).val("1 Proficient");break;case"1P":$(this).val("1 Proficient");break;case"1 P":$(this).val("1 Proficient");break;case"1 Proficient":$(this).val("1 Proficient");break;case"1a":$(this).val("1 Advanced");break;case"1 a":$(this).val("1 Advanced");break;case"1A":$(this).val("1 Advanced");break;case"1 A":$(this).val("1 Advanced");break;case"1 Advanced":$(this).val("1 Advanced");break;case"2b":$(this).val("2 Basic");break;case"2 b":$(this).val("2 Basic");break;case"2B":$(this).val("2 Basic");break;case"2 B":$(this).val("2 Basic");break;case"2 Basic":$(this).val("2 Basic");break;case"2p":$(this).val("2 Proficient");break;case"2 p":$(this).val("2 Proficient");break;case"2P":$(this).val("2 Proficient");break;case"2 P":$(this).val("2 Proficient");break;case"2 Proficient":$(this).val("2 Proficient");break;case"2a":$(this).val("2 Advanced");break;case"2 a":$(this).val("2 Advanced");break;case"2A":$(this).val("2 Advanced");break;case"2 A":$(this).val("2 Advanced");break;case"2 Advanced":$(this).val("2 Advanced");break;case"3b":$(this).val("3 Basic");break;case"3 b":$(this).val("3 Basic");break;case"3B":$(this).val("3 Basic");break;case"3 B":$(this).val("3 Basic");break;case"3 Basic":$(this).val("3 Basic");break;case"3p":$(this).val("3 Proficient");break;case"3 p":$(this).val("3 Proficient");break;case"3P":$(this).val("3 Proficient");break;case"3 P":$(this).val("3 Proficient");break;case"3 Proficient":$(this).val("3 Proficient");break;case"3a":$(this).val("3 Advanced");break;case"3 a":$(this).val("3 Advanced");break;case"3A":$(this).val("3 Advanced");break;case"3 A":$(this).val("3 Advanced");break;case"3 Advanced":$(this).val("3 Advanced");break;case"4b":$(this).val("4 Basic");break;case"4 b":$(this).val("4 Basic");break;case"4B":$(this).val("4 Basic");break;case"4 B":$(this).val("4 Basic");break;case"4 Basic":$(this).val("4 Basic");break;case"4p":$(this).val("4 Proficient");break;case"4 p":$(this).val("4 Proficient");break;case"4P":$(this).val("4 Proficient");break;case"4 P":$(this).val("4 Proficient");break;case"4 Proficient":$(this).val("4 Proficient");break;case"4a":$(this).val("4 Advanced");break;case"4 a":$(this).val("4 Advanced");break;case"4A":$(this).val("4 Advanced");break;case"4 A":$(this).val("4 Advanced");break;case"4 Advanced":$(this).val("4 Advanced");break;case"5b":$(this).val("5 Basic");break;case"5 b":$(this).val("5 Basic");break;case"5B":$(this).val("5 Basic");break;case"5 B":$(this).val("5 Basic");break;case"5 Basic":$(this).val("5 Basic");break;case"5p":$(this).val("5 Proficient");break;case"5 p":$(this).val("5 Proficient");break;case"5P":$(this).val("5 Proficient");break;case"5 P":$(this).val("5 Proficient");break;case"5 Proficient":$(this).val("5 Proficient");break;case"5a":$(this).val("5 Advanced");break;case"5 a":$(this).val("5 Advanced");break;case"5A":$(this).val("5 Advanced");break;case"5 A":$(this).val("5 Advanced");break;case"5 Advanced":$(this).val("5 Advanced");break;case"6b":$(this).val("6 Basic");break;case"6 b":$(this).val("6 Basic");break;case"6B":$(this).val("6 Basic");break;case"6 B":$(this).val("6 Basic");break;case"6 Basic":$(this).val("6 Basic");break;case"6p":$(this).val("6 Proficient");break;case"6 p":$(this).val("6 Proficient");break;case"6P":$(this).val("6 Proficient");break;case"6 P":$(this).val("6 Proficient");break;case"6 Proficient":$(this).val("6 Proficient");break;case"6a":$(this).val("6 Advanced");break;case"6 a":$(this).val("6 Advanced");break;case"6A":$(this).val("6 Advanced");break;case"6 A":$(this).val("6 Advanced");break;case"6 Advanced":$(this).val("6 Advanced");break;case"7b":$(this).val("7 Basic");break;case"7 b":$(this).val("7 Basic");break;case"7B":$(this).val("7 Basic");break;case"7 B":$(this).val("7 Basic");break;case"7 Basic":$(this).val("7 Basic");break;case"7p":$(this).val("7 Proficient");break;case"7 p":$(this).val("7 Proficient");break;case"7P":$(this).val("7 Proficient");break;case"7 P":$(this).val("7 Proficient");break;case"7 Proficient":$(this).val("7 Proficient");break;case"7a":$(this).val("7 Advanced");break;case"7 a":$(this).val("7 Advanced");break;case"7A":$(this).val("7 Advanced");break;case"7 A":$(this).val("7 Advanced");break;case"7 Advanced":$(this).val("7 Advanced");break;case"8b":$(this).val("8 Basic");break;case"8 b":$(this).val("8 Basic");break;case"8B":$(this).val("8 Basic");break;case"8 B":$(this).val("8 Basic");break;case"8 Basic":$(this).val("8 Basic");break;case"8p":$(this).val("8 Proficient");break;case"8 p":$(this).val("8 Proficient");break;case"8P":$(this).val("8 Proficient");break;case"8 P":$(this).val("8 Proficient");break;case"8 Proficient":$(this).val("8 Proficient");break;case"8a":$(this).val("8 Advanced");break;case"8 a":$(this).val("8 Advanced");break;case"8A":$(this).val("8 Advanced");break;case"8 A":$(this).val("8 Advanced");break;case"8 Advanced":$(this).val("8 Advanced");break;default:$(this).val("Sorry, that is not a valid input")}}else if(b=="reading"){switch(a){case"Magenta":$(this).val("Magenta");break;case"magenta":$(this).val("Magenta");break;case"m":$(this).val("Magenta");break;case"M":$(this).val("Magenta");break;case"Red":$(this).val("Red");break;case"red":$(this).val("Red");break;case"r":$(this).val("Red");break;case"R":$(this).val("Red");break;case"Yellow":$(this).val("Yellow");break;case"yellow":$(this).val("Yellow");break;case"y":$(this).val("Yellow");break;case"Y":$(this).val("Yellow");break;case"Dark Blue":$(this).val("Dark Blue");break;case"Dark blue":$(this).val("Dark Blue");break;case"dark blue":$(this).val("Dark Blue");break;case"db":$(this).val("Dark Blue");break;case"Db":$(this).val("Dark Blue");break;case"DB":$(this).val("Dark Blue");break;case"Dk Blue":$(this).val("Dark Blue");break;case"dk blue":$(this).val("Dark Blue");break;case"Green":$(this).val("Green");break;case"green":$(this).val("Green");break;case"g":$(this).val("Green");break;case"G":$(this).val("Green");break;case"Light Blue":$(this).val("Light Blue");break;case"light blue":$(this).val("Light Blue");break;case"Light blue":$(this).val("Light Blue");break;case"lb":$(this).val("Light Blue");break;case"Lb":$(this).val("Light Blue");break;case"LB":$(this).val("Light Blue");break;case"L Blue":$(this).val("Light Blue");break;case"l blue":$(this).val("Light Blue");break;case"Turquoise":$(this).val("Light Blue");break;case"turquoise":$(this).val("Light Blue");break;case"Purple":$(this).val("Purple");break;case"purple":$(this).val("Purple");break;case"p":$(this).val("Purple");break;case"P":$(this).val("Purple");break;case"Gold":$(this).val("Gold");break;case"gold":$(this).val("Gold");break;case"gl":$(this).val("Gold");break;case"GL":$(this).val("Gold");break;case"2b":$(this).val("2 Basic");break;case"2 b":$(this).val("2 Basic");break;case"2B":$(this).val("2 Basic");break;case"2 B":$(this).val("2 Basic");break;case"2 Basic":$(this).val("2 Basic");break;case"2p":$(this).val("2 Proficient");break;case"2 p":$(this).val("2 Proficient");break;case"2P":$(this).val("2 Proficient");break;case"2 P":$(this).val("2 Proficient");break;case"2 Proficient":$(this).val("2 Proficient");break;case"2a":$(this).val("2 Advanced");break;case"2 a":$(this).val("2 Advanced");break;case"2A":$(this).val("2 Advanced");break;case"2 A":$(this).val("2 Advanced");break;case"2 Advanced":$(this).val("2 Advanced");break;case"3b":$(this).val("3 Basic");break;case"3 b":$(this).val("3 Basic");break;case"3B":$(this).val("3 Basic");break;case"3 B":$(this).val("3 Basic");break;case"3 Basic":$(this).val("3 Basic");break;case"3p":$(this).val("3 Proficient");break;case"3 p":$(this).val("3 Proficient");break;case"3P":$(this).val("3 Proficient");break;case"3 P":$(this).val("3 Proficient");break;case"3 Proficient":$(this).val("3 Proficient");break;case"3a":$(this).val("3 Advanced");break;case"3 a":$(this).val("3 Advanced");break;case"3A":$(this).val("3 Advanced");break;case"3 A":$(this).val("3 Advanced");break;case"3 Advanced":$(this).val("3 Advanced");break;case"4b":$(this).val("4 Basic");break;case"4 b":$(this).val("4 Basic");break;case"4B":$(this).val("4 Basic");break;case"4 B":$(this).val("4 Basic");break;case"4 Basic":$(this).val("4 Basic");break;case"4p":$(this).val("4 Proficient");break;case"4 p":$(this).val("4 Proficient");break;case"4P":$(this).val("4 Proficient");break;case"4 P":$(this).val("4 Proficient");break;case"4 Proficient":$(this).val("4 Proficient");break;case"4a":$(this).val("4 Advanced");break;case"4 a":$(this).val("4 Advanced");break;case"4A":$(this).val("4 Advanced");break;case"4 A":$(this).val("4 Advanced");break;case"4 Advanced":$(this).val("4 Advanced");break;case"5b":$(this).val("5 Basic");break;case"5 b":$(this).val("5 Basic");break;case"5B":$(this).val("5 Basic");break;case"5 B":$(this).val("5 Basic");break;case"5 Basic":$(this).val("5 Basic");break;case"5p":$(this).val("5 Proficient");break;case"5 p":$(this).val("5 Proficient");break;case"5P":$(this).val("5 Proficient");break;case"5 P":$(this).val("5 Proficient");break;case"5 Proficient":$(this).val("5 Proficient");break;case"5a":$(this).val("5 Advanced");break;case"5 a":$(this).val("5 Advanced");break;case"5A":$(this).val("5 Advanced");break;case"5 A":$(this).val("5 Advanced");break;case"5 Advanced":$(this).val("5 Advanced");break;default:$(this).val("Sorry, that is not a valid input")}}});jQuery("li.filter").live("click",function(){$("dt").hide();$("dd").hide();type=$(this).data("type");$("dt."+type).show();$("dd."+type).show()});jQuery("#above_key").css("width",jQuery(".reading_theme_e").size()+"%");jQuery(".main-content > .badge").live("click",function(){theId=$(this).data("id");name=$(this).data("name");jQuery("#dialog_heading").html(name);jQuery("#dialog_content").html("Loading...");jQuery.post(MyAjax.ajaxurl,{action:"ajax_fetch_child_detail",Id:theId,Nonce:b},function(a){jQuery("#dialog_content").html(a)})});jQuery(".selectable").live("click",function(){id=$(this).data("personid");name=$(this).data("name");checkbox_id=$("#check_"+id);label_id=$("#label_"+id);if(checkbox_id.length){checkbox_id.remove();label_id.remove()}else{checkboxLi='<span id="label_'+id+'">'+name+'</span><input type="checkbox" class="hidden_checkbox" id="check_'+id+'" name="person_'+id+'" checked="checked" />';$("#hiddenCheckboxes").append(checkboxLi)}if($(this).hasClass("d")){$(this).removeClass("d")}else{$(this).addClass("d")}});jQuery(".indicator_group_detail").live("click",function(){theId=$(this).data("id");theIndicatorId=$(this).data("indicatorid");jQuery("#dialog_content").html("Loading...");jQuery.post(MyAjax.ajaxurl,{action:"ajax_fetch_group_show_children_by_indicator",Id:theId,indicatorid:theIndicatorId,Nonce:b},function(a){jQuery("#dialog_content").html(a)})});jQuery(".highlight").live("click",function(){$(this).removeClass("ui-btn-up-d");$(".highlight").removeClass("ui-btn-up-f");$(this).addClass("ui-btn-up-f");var a=jQuery(this).attr("id");jQuery(".badge").removeClass("f");jQuery(".badge").removeClass("b");jQuery(".badge").removeClass("e");jQuery(".badge").removeClass("c");jQuery(".badge").removeClass("d");jQuery(".badge").each(function(){value=jQuery(this).data(a);if(a=="readinghighlight"||a=="writinghighlight"||a=="mathshighlight"){console.log(value);jQuery(this).addClass(value)}else{if(value=="yes"){jQuery(this).addClass("f")}}})});jQuery("#confirm_delete").live("click",function(){var a=jQuery("#delete_post_id").val();jQuery.post(MyAjax.ajaxurl,{action:"myajax_ajax_remove_post",id:a,Nonce:b},function(b){jQuery(".ui-dialog").dialog("close");jQuery(".post-"+a).hide()})});jQuery("#confirm_delete_group").live("click",function(){var a=jQuery("#delete_group_id").val();jQuery.post(MyAjax.ajaxurl,{action:"myajax_ajax_remove_group",id:a,Nonce:b},function(b){jQuery(".ui-dialog").dialog("close");jQuery("#group_"+a).hide()})});jQuery("#close_confirm").live("click",function(){jQuery(".ui-dialog").dialog("close")});jQuery("#slider_submit").live("click",function(){jQuery("#dialog_content").html("checking...");var a=jQuery(this).data("personid");var c=jQuery("#slider_"+a).val();var d=jQuery(this).data("subject");jQuery.post(MyAjax.ajaxurl,{action:"fetch_standard_desc_confirmation",id:a,subject:d,value:c,Nonce:b},function(a){jQuery("#dialog_content").html(a);jQuery("#dialog_content a").buttonMarkup()})});jQuery("#confirm_save").live("click",function(){form=$(this).data("formid");if(form){$("#"+form).submit()}else{$("#slider_form").submit()}});jQuery("#rolldate").live("change",function(){jQuery(".post_list").html("Loading...");var a=jQuery(this).val();jQuery.post(MyAjax.ajaxurl,{action:"myajax_fetch_register_list",theDate:a,Nonce:b},function(a){jQuery(".post_list").html(a);jQuery("#main").page("destroy").page()})});jQuery("#write > .ui-header > .ui-btn").live("click",function(){jQuery("#post_form").find(":input").each(function(){switch(this.type){case"textarea":jQuery(this).html("");break;case"radio":this.checked=false;jQuery(this).checkboxradio("refresh")}})});jQuery(".editPost").live("click",function(){var a=jQuery(this).data("id");var b=jQuery(this).data("author");var c=jQuery(this).data("postdate");var d=jQuery(this).data("subject");var e=jQuery(this).data("status");var f=jQuery(this).data("type");var g=jQuery("#post_"+a+" >p").html();jQuery("#postcontent").html(g);jQuery("#existing_post_id").val(a);jQuery("#post_author").val(b);jQuery("#post_date").val(c);jQuery("#radio-comp").val(f);jQuery("#radio-choice-"+e).prop("checked","checked").checkboxradio("refresh");jQuery("#radio-subject-"+d).prop("checked","checked").checkboxradio("refresh")});jQuery("#write_button").live("click",function(){jQuery("#existing_post_id").val();jQuery("#post_author").val();jQuery("#post_date").val()});jQuery(".change_post_meta").live("click",function(){var a=jQuery(this).data("type");var b=jQuery(this).data("description");var c=jQuery(this).data("subject");jQuery("#existing_post_id").val();jQuery("#post_author").val();jQuery("#post_date").val();jQuery("#radio-comp").val(a);jQuery("#select-subject").val(c);jQuery("#postcontent").html(b)});jQuery(".loadPeopleByAlphabet").live("click",function(){$(this).removeClass("ui-btn-up-d");$(".loadPeopleByAlphabet").removeClass("ui-btn-up-f");$(this).addClass("ui-btn-up-f");theLetter=$(this).data("letter");theAction="ajax_people_by_alphabet";jQuery.post(MyAjax.ajaxurl,{action:theAction,letter:theLetter,Nonce:b},function(a){jQuery("#selectableList").html(a)})});jQuery(".load_page").live("click",function(){jQuery("#page_content").html("Loading...");$(this).removeClass("ui-btn-up-d");$(".load_page").removeClass("ui-btn-up-f");$(this).addClass("ui-btn-up-f");group_id=$(this).data("groupid");page_type=$(this).data("pagetype");referrer=$(this).data("referrer");theAction="ajax_load_page_goals";jQuery.post(MyAjax.ajaxurl,{action:theAction,groupid:group_id,pageType:page_type,refer:referrer,Nonce:b},function(a){jQuery("#page_content").html(a);$("#page_content").trigger("create")})});jQuery(".load_page_content").live("click",function(){jQuery("#page_content").html("Loading...");$(this).removeClass("ui-btn-up-d");$(".load_page_content").removeClass("ui-btn-up-f");$(this).addClass("ui-btn-up-f");group_id=$(this).data("groupid");page_type=$(this).data("pagetype");theAction=$(this).data("action");jQuery.post(MyAjax.ajaxurl,{action:theAction,groupid:group_id,pageType:page_type,Nonce:b},function(a){jQuery("#page_content").html(a);jQuery("#page_content").trigger("create")})});jQuery(".createGroup").live("click",function(){peoplestring=$(this).data("peoplestring");yeargroup=$(this).data("yeargroup");page_type=$(this).data("pagetype");theAction="ajax_create_auto_group";theRoom=$(this).data("room");jQuery.post(MyAjax.ajaxurl,{action:theAction,year:yeargroup,people:peoplestring,pageType:page_type,room:theRoom,Nonce:b},function(a){jQuery("#dialog_content").html(a);jQuery("#dialog_content").trigger("create")})});jQuery(".loadIndicatorsButton").live("click",function(){var a=jQuery(this).data("subject");jQuery("#custom_"+a).html("Loading...");$(this).removeClass("ui-btn-up-d");$(".loadIndicatorsButton").removeClass("ui-btn-up-f");$(this).addClass("ui-btn-up-f");var c=jQuery(this).data("id");var d=jQuery(this).data("level");var e=jQuery(this).data("action");jQuery.post(MyAjax.ajaxurl,{action:e,theId:c,theSubject:a,theLevel:d,Nonce:b},function(b){jQuery("#custom_"+a).html(b);$("#custom_"+a).trigger("create")})});$(".secure").live("click",function(a){a.preventDefault();$(this).removeClass("secure");$(this).addClass("notassessed");$(this).removeClass("ui-btn-up-d"); addClass("ui-btn-up-b");var c=$(this).data("id");var d=$(this).data("subject");var e=$(this).data("personid");var f="notassessed";var g=$("#set_text_"+c);var h=$(this).find(".ui-btn-text");h.html("Saving...");$.post(MyAjax.ajaxurl,{action:"update_indicator",Id:c,personId:e,update:f,subject:d,Nonce:b},function(a){g.html(a);h.html("Goal")})});$(".personSecure").live("click",function(a){a.preventDefault();$(this).removeClass("personSecure");$(this).addClass("personDeveloping");$(this).removeClass("d");$(this).addClass("f");var c=$(this).data("id");var d=$(this).data("personid");var e="developing";var f=$(this).find(".name");var g=$(this).find(".counter");var h=f.html();f.html("Saving...");$.post(MyAjax.ajaxurl,{action:"update_indicator",Id:c,personId:d,update:e,Nonce:b},function(a){f.html(h);g.removeClass("hidden");g.html('<span id="'+d+'_counter">'+a+"</span>");$("#"+d+"_counter").fadeOut(3e3,function(){g.addClass("hidden")})})});$(".personDeveloping").live("click",function(a){a.preventDefault();$(this).removeClass("personDeveloping");$(this).addClass("personSecure");$(this).removeClass("f");$(this).addClass("d");var c=$(this).data("id");var d=$(this).data("personid");var e="secure";var f=$(this).find(".name");var g=$(this).find(".counter");var h=f.html();f.html("Saving...");$.post(MyAjax.ajaxurl,{action:"update_indicator",Id:c,personId:d,update:e,Nonce:b},function(a){f.html(h);g.removeClass("hidden");g.html('<span id="'+d+'_counter">'+a+"</span>");$("#"+d+"_counter").fadeOut(3e3,function(){g.addClass("hidden")})})});$(".notsetyet").live("click",function(a){a.preventDefault();$(this).removeClass("notsetyet");$(this).addClass("personDeveloping");$(this).addClass("f");var c=$(this).data("id");var d=$(this).data("personid");var e="developing";var f=$(this).find(".name");var g=$(this).find(".counter");var h=f.html();f.html("Saving...");$.post(MyAjax.ajaxurl,{action:"insert_indicator",Id:c,personId:d,update:e,Nonce:b},function(a){f.html(h);g.removeClass("hidden");g.html('<span id="'+d+'_counter">'+a+"</span>");$("#"+d+"_counter").fadeOut(3e3,function(){g.addClass("hidden")})})});$(".developing").live("click",function(a){a.preventDefault();$(this).removeClass("developing");$(this).addClass("secure");$(this).addClass("ui-btn-up-d");$(this).removeClass("ui-btn-up-f");var c=$(this).data("id");var d=$(this).data("subject");var e=$(this).data("personid");var f="secure";var g=$("#set_text_"+c);var h=$(this).find(".ui-btn-text");h.html("Saving...");$.post(MyAjax.ajaxurl,{action:"update_indicator",Id:c,personId:e,update:f,subject:d,Nonce:b},function(a){g.html(a);h.html("Secure");$(this).removeClass("ui-btn-up-f")})});$(".notassessed").live("click",function(a){a.preventDefault();$(this).removeClass("notassessed");$(this).addClass("developing");$(this).removeClass("ui-btn-up-b");$(this).addClass("ui-btn-up-f");var c=$(this).data("personid");var d=$(this).data("subject");var e=$(this).data("id");var f="developing";var g=$(this).data("subject");var h=$("#set_text_"+e);var i=$(this).find(".ui-btn-text");i.html("Saving...");jQuery.post(MyAjax.ajaxurl,{action:"insert_indicator",Id:e,update:f,personId:c,assessmentSubject:g,Nonce:b},function(a){h.html(a);i.html("Set as Complete")})})});(function(a){a.fn.htmlbox=function(b){var c=typeof document.htmlbox_colors==="function"?document.htmlbox_colors():["silver","silver","white","white","yellow","yellow","orange","orange","red","red","green","green","blue","blue","brown","brown","black","black"];var d=typeof document.htmlbox_styles==="function"?document.htmlbox_styles():[["No Styles","",""]];var e=typeof document.htmlbox_syntax==="function"?document.htmlbox_syntax():[["No Syntax","",""]];var f=typeof htmlbox_undo_redo_manager==="function"?new htmlbox_undo_redo_manager:false;var g={toolbars:[["bold","italic","underline"]],idir:"style/images/",icons:"default",about:false,skin:"default",output:"xhtml",toolbar_height:24,tool_height:16,tool_width:16,tool_image_height:16,tool_image_width:16,css:"body{margin:3px;font-family:verdana;}p{margin:0px;}",success:function(a){alert(a)},error:function(a,b,c){return this}};g=a.extend(g,b);if(g.idir.substring(g.idir.length-1)!=="/"){g.idir+="/"}var h=function(){var b;if(a.browser.msie){b=g.iframe.contentWindow.document.selection.createRange();if(b.htmlText&&b.text){return b.htmlText}}else{if(g.iframe.contentWindow.getSelection){var c=g.iframe.contentWindow.getSelection();if(c.rangeCount>0&&window.XMLSerializer){b=c.getRangeAt(0);var d=(new XMLSerializer).serializeToString(b.cloneContents());return d}if(c.rangeCount>0){b=c.getRangeAt(0);var e=b.cloneContents();var f=document.createElement("div");f.appendChild(e);return f.innerHTML}}}};var i=function(a,b){for(var c in b){if(c===a){return true}}return false};var j=function(b,c,d){if(a.browser.msie){g.iframe.contentWindow.focus();if(typeof g.idoc.selection!=="undefined"&&g.idoc.selection.type!=="Text"&&g.idoc.selection.type!=="None"){c=false;g.idoc.selection.clear()}var e=g.idoc.selection.createRange();e.pasteHTML(b);if(b.indexOf("\n")===-1){if(c===false){}else{if(typeof c!=="undefined"){e.moveStart("character",-b.length+c);e.moveEnd("character",-d)}else{e.moveStart("character",-b.length)}}e.select()}}else{g.idoc.execCommand("insertHTML",false,b)}if(a("#"+g.id).is(":visible")===false){var h=a("#1"+g.id).is(":visible")?a("#"+g.id).val():h=g.iframe.contentWindow.document.body.innerHTML;h=typeof getXHTML==="function"?getXHTML(h):h;a("#"+g.id).val(h);if(f){f.add(h)}if(undefined!==g.change){g.change()}}};var k=function(b){var c=a("#1"+g.id).is(":visible")?a("#"+g.id).val():c=g.iframe.contentWindow.document.body.innerHTML;if(f){f.add(c)}c=typeof getXHTML==="function"?getXHTML(c):c;a("#"+g.id).val(c);if(undefined!==g.change){g.change()}};var l=function(){if(g.css.indexOf("background:")===-1){g.css+="body{background:white;}"}if(g.idoc.createStyleSheet){g.idoc.createStyleSheet().cssText=g.css}else{var b=g.idoc.createElement("link");b.rel="stylesheet";b.href="data:text/css,"+escape(g.css);if(a.browser.opera){g.idoc.documentElement.appendChild(b)}else{g.idoc.getElementsByTagName("head")[0].appendChild(b)}}};var m=function(){var a="";if(g.about&&!i(g.toolbars[0],"about")){g.toolbars[0][g.toolbars[0].length]="separator";g.toolbars[0][g.toolbars[0].length]="about"}for(var b=0;b<g.toolbars.length;b++){var f=g.toolbars[b];a+="<tr><td class='"+g.id+"_tb' valign='middle'><table cellspacing='1' cellpadding='0'>";for(var h=0;h<f.length;h++){var j=g.icons==="default"?g.idir+"default/"+f[h]+".gif":g.idir+g.icons+"/"+f[h]+".png";if(undefined===f[h]){continue}else if(typeof f[h]!=="string"){j=g.idir+g.icons+"/"+f[h].icon;var k='var cmd = unescape("'+escape(f[h].command.toString())+'");eval("var fn="+cmd);fn()\'';a+="<td class='"+g.id+"_html_button' valign='middle' align='center' onclick='"+k+"' title='"+f[h].tooltip+"'><image src='"+j+"'></td>"}else if(f[h]==="separator"){a+="<td valign='middle' align='center'><image src='"+g.idir+"separator.gif' style='margin-right:1px;margin-left:3px;height:13px;'></td>"}else if(f[h]==="fontsize"){a+="<td valign='middle' align='center'><select id='"+g.id+"_fontsize' onchange='global_hb[\""+g.id+"\"].cmd(\"fontsize\",this.options[this.selectedIndex].value)' style='font-size:12px;'><option value='' selected>- SIZE -</option><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option></select></td>"}else if(f[h]==="fontfamily"){a+="<td valign='middle' align='center'><select id='"+g.id+"_fontfamily' onchange='global_hb[\""+g.id+"\"].cmd(\"fontname\",this.options[this.selectedIndex].value)' style='font-size:12px;'><option value='' selected>- FONT -</option><option value='arial' style='font-family:arial;'>Arial</option><option value='courier' style='font-family:courier;'>Courier</option><option value='cursive' style='font-family:cursive;'>Cursive</option><option value='georgia' style='font-family:georgia;'>Georgia</option><option value='monospace' style='font-family:monospace;'>Monospace</option><option value='tahoma' style='font-family:tahoma;'>Tahoma</option><option value='verdana' style='font-family:verdana;'>Verdana</option></select></td>"}else if(f[h]==="formats"){a+="<td valign='middle' align='center'><select id='"+g.id+"_formats' onchange='global_hb[\""+g.id+"\"].cmd(\"format\",this.options[this.selectedIndex].value)' style='font-size:12px;'><option value='' selected>- FORMATS -</option><option value='h1'>Heading 1</option><option value='h2'>Heading 2</option><option value='h3'>Heading 3</option><option value='h4'>Heading 4</option><option value='h5'>Heading 5</option><option value='h6'>Heading 6</option><option value='p'>Paragraph</option><option value='pindent'>First Indent</option><option value='pre'>Preformatted</option></select></td>"}else if(f[h]==="fontcolor"){a+="<td valign='middle' align='center'><select id='"+g.id+"_fontcolor' onchange='global_hb[\""+g.id+"\"].cmd(\"fontcolor\",this.options[this.selectedIndex].value)' style='font-size:12px;'><option value='' selected>-COLOR-</option>";for(var l=0;l<c.length;l++){if(l%2){continue}a+="<option value='"+c[l]+"' style='background:"+c[l]+";color:"+c[l]+";'>"+c[l]+"</option>"}a+="</select></td>"}else if(f[h]==="highlight"){a+="<td valign='middle' align='center'><select id='"+g.id+"_highlight' onchange='global_hb[\""+g.id+"\"].cmd(\"backcolor\",this.options[this.selectedIndex].value)' style='font-size:12px;'><option value='' selected>-HIGHLIGHT-</option>";for(var m=0;m<c.length;m++){if(m%2){continue}a+="<option value='"+c[m]+"' style='background:"+c[m]+";color:"+c[m]+";'>"+c[m]+"</option>"}a+="</select></td>"}else if(f[h]==="styles"){a+="<td valign='middle' align='center'><select id='"+g.id+"_styles' onchange='global_hb[\""+g.id+"\"].cmd(\"styles\",this.options[this.selectedIndex].value);this.options[0].selected=\"true\";' style='font-size:12px;' style='background:white;'><option value='' selected>-STYLES-</option>";for(var n=0;n<d.length;n++){if(n%2){continue}a+="<option value='"+n+"' style='background:white;color:red;'>"+d[n][0]+"</option>"}a+="</select></td>"}else if(f[h]==="syntax"){a+="<td valign='middle' align='center'><select id='"+g.id+"_syntax' onchange='global_hb[\""+g.id+"\"].cmd(\"syntax\",this.options[this.selectedIndex].value);this.options[0].selected=\"true\";' style='font-size:12px;'><option value='' selected>-SYNTAX-</option>";for(var o=0;o<e.length;o++){if(o%2){continue}a+="<option value='"+o+"' style='background:white;color:red;'>"+e[o][0]+"</option>"}a+="</select></td>"}var p={about:"About",bold:"Bold",center:"Center",code:"View Code",copy:"Copy",cut:"Cut",hr:"Insert Line",link:"Insert Link",image:"Insert Image",indent:"Indent",italic:"Italic",justify:"Justify",left:"Left",ol:"Numbered List",outdent:"Outdent",paragraph:"Insert Paragraph",paste:"Paste",quote:"Quote",redo:"Redo",removeformat:"Remove Format",right:"Right",strike:"Strikethrough",striptags:"Strip Tags",sub:"Subscript",sup:"Superscript",ul:"Bulleted List",underline:"Underline",undo:"Undo",unlink:"Remove Link"};if(i(f[h],p)){a+="<td class='"+g.id+"_html_button' valign='middle' align='center' onclick='global_hb[\""+g.id+'"].cmd("'+f[h]+"\")' title='"+p[f[h]]+"'><image src='"+j+"'></td>"}}a+="</table></td></tr>"}return a};this.wrap_tags=function(a,b){var c=h();if(undefined===c){c=""}if(undefined===b){b=""}j(a+c+b,a.length,b.length)};this._init=function(b){if(undefined===window.global_hb){global_hb=[]}if(!a(this).attr("id")){a(this).attr("id","jqhb_"+global_hb.length);g.id="jqhb_"+global_hb.length;global_hb[g.id]=global_hb}else{g.id=a(this).attr("id")}if(undefined===global_hb[g.id]){global_hb[g.id]=this}g.ta_wrap_id=g.id+"_wrap";var c="100%";var d=a(this).css("400");a(this).wrap("<table id='"+g.id+"_wrap' width='"+c+"' style='height:"+d+";border:2px solid #E9EAEF;' cellspacing='0' cellpadding='0'><tr><td id='"+g.id+"_container'></td></tr></table>");a(this).parent().parent().parent().parent().prepend(m());a("."+g.id+"_tb").height(g.toolbar_height);a("."+g.id+"_html_button").each(function(){a(this).width(g.tool_width).height(g.tool_height);a(this).find("image").each(function(){a(this).width(g.tool_image_width).height(g.tool_image_height)});a(this).css("border","1px solid transparent").css("background","transparent").css("margin","1px 1px 1px 1px").css("padding","1px");a(this).mouseover(function(){a(this).css("border","1px solid #BFCAFF").css("background","#EFF2FF")});a(this).mouseout(function(){a(this).css("border","1px solid transparent").css("background","transparent")})});a("."+g.id+"_tb").find("select").each(function(){a(this).css("border","1px solid #E9EAEF").css("background","transparent").css("margin","2px 2px 3px 2px");if(a.browser.mozilla){a(this).css("padding","0").css("position","relative").css("top","-2px")}});var e="1px solid #7F7647";var f="#DFDDD1";var h="1px solid #7F7647";if(g.skin==="blue"){e="1px solid #7E9DB9";f="#D7E3F2";h="1px solid #7E9DB9"}if(g.skin==="red"){f="#FFD7CF"}if(g.skin==="green"){e="1px solid #8DB900";f="#D5EF86";h="1px solid #8DB900"}if(g.skin==="silver"){e="1px solid #DDDDDD";f="#F4F4F3";h="1px solid #DDDDDD"}a("#"+g.id+"_wrap").css("border",e);a("#"+g.id+"_wrap").css("background",f);a("#"+g.id+"_container").css("background","white");a("."+g.id+"_tb").css("border-bottom",h);try{var i=document.createElement("IFRAME");a(i).css("width",c).css("height",d).attr("id",g.id+"_html").css("border","0");a(this).parent().prepend(i);g.iframe=i;g.idoc=i.contentWindow.document;g.idoc.designMode="on";var j=a(this).val()===""?"":a(this).val();if(a.browser.mozilla||a.browser.safari){g.idoc.open("text/html","replace");g.idoc.write(j);g.idoc.close()}else{if(j!==""){g.idoc.write(j)}else{if(a.browser.msie){g.idoc.write(" ")}}}if(a.browser.msie===false){i.contentWindow.document.body.contentEditable=true}if(g.css.indexOf("background:")===-1){g.css+="body{background:white;}"}if(g.idoc.createStyleSheet){setTimeout("global_hb['"+g.id+"'].set_text(global_hb['"+g.id+"'].get_html())",10)}else{l()}if(i.contentWindow.document.attachEvent){i.contentWindow.document.attachEvent("onkeyup",k)}else{i.contentWindow.document.addEventListener("keyup",k,false)}a(this).hide()}catch(n){alert("This rich text component is not supported by your browser.\n"+n);a(this).show()}return this};this.cmd=function(b,c){g.iframe.contentWindow.focus();if(b==="paragraph"){b="format";c="p"}var k={center:"justifycenter",hr:"inserthorizontalrule",justify:"justifyfull",left:"justifyleft",ol:"insertorderedlist",right:"justifyright",strike:"strikethrough",sub:"subscript",sup:"superscript",ul:"insertunorderedlist"};if(i(b,k)){b=k[b]}if(b==="code"){var l=this.get_html();if(a("#"+g.id).is(":visible")){a("#"+g.id).hide();a("#"+g.id+"_html").show();this.set_text(l)}else{a("#"+g.id).show();a("#"+g.id+"_html").hide();this.set_text(l);a("#"+g.id).focus()}}else if(b==="link"){g.idoc.execCommand("createlink",false,prompt("Paste Web Address URL Here:"))}else if(b==="image"){g.idoc.execCommand("insertimage",false,prompt("Paste Image URL Here:"))}else if(b==="fontsize"){g.idoc.execCommand(b,false,c)}else if(b==="backcolor"){if(a.browser.msie){g.idoc.execCommand("backcolor",false,c)}else{g.idoc.execCommand("hilitecolor",false,c)}}else if(b==="fontcolor"){g.idoc.execCommand("forecolor",false,c)}else if(b==="fontname"){g.idoc.execCommand(b,false,c)}else if(b==="cut"){if(a.browser.msie===false){alert("Available in IExplore only.\nUse CTRL+X to cut text!")}else{g.idoc.execCommand("Cut")}}else if(b==="copy"){if(a.browser.msie===false){alert("Available in IExplore only.\nUse CTRL+C to copy text!")}else{g.idoc.execCommand("Copy")}}else if(b==="paste"){if(a.browser.msie===false){alert("Available in IExplore only.\nUse CTRL+V to paste text!")}else{g.idoc.execCommand("Paste")}}else if(b==="format"){if(c==="pindent"){this.wrap_tags('<p style="text-indent:20px;">',"</p>")}else if(c!==""){g.idoc.execCommand("formatBlock",false,"<"+c+">")}}else if(b==="striptags"){var m=h();m=m.replace(/(<([^>]+)>)/ig,"");j(m)}else if(b==="quote"){this.wrap_tags('<br /><div style="position:relative;top:10px;left:11px;font-size:11px;font-family:verdana;">Quote</div><div class="quote" contenteditable="true" style="border:1px inset silver;margin:10px;padding:5px;background:#EFF7FF;">',"</div><br />")}else if(b==="styles"){this.wrap_tags(d[c][1],d[c][2])}else if(b==="syntax"){this.wrap_tags(e[c][1],e[c][2])}else if(b==="bold"){this.wrap_tags("<b>","</b>")}else if(b==="undo"&&f){if(f.can_undo()){var n=f.undo();this.set_text(n);return true}}else if(b==="redo"&&f){if(f.can_redo()){var o=f.redo();this.set_text(o);return true}}else if(b==="about"){var p="<p>HtmlBox is a modern, cross-browser, interactive, open-source text area built on top of the excellent jQuery library.</p>";p+="<p style='margin:2px;'><b>Official Website:</b> <a href='http://remiya.com' target='_blank'>http://remiya.com</a></p>";p+="<p style='margin:2px;'><b>License:</b> MIT license</p>";p+="<p style='margin:2px;'><b>Version:</b> 4.0</p>";p+="<p style='margin:2px;'><b>Credits:</b></p>";p+="<p style='margin:2px;padding-left:20px;'><a href='http://jquery.com/' target='_blank'>JQuery (JavaScript Framework)</a></p>";p+="<p style='margin:2px;padding-left:20px;'><a href='http://www.famfamfam.com/lab/icons/silk/' target='_blank'>Silk (Icon Set)</a></p>";var q='<table cellspacing="3" cellpadding="0" width="100%" height="100%"  style="background:#D7E3F2;border:2px solid #7E9DB9;font-family:verdana;font-size:12px;">';q+='<tr><td align="center" valign="middle" height="30" style="font-size:16px;"><b>About HtmlBox</b></td></tr>';q+='<tr><td style="border:1px solid #7E9DB9;background:white;font-size:11px;" valign="top"><div style="overflow:auto;height:140px;" >'+p+"</div></td></tr>";q+='<tr><td height="20"><table width="100%" style="font-family:verdana;font-size:10px;"><tr><td align="left">Copyright©2009 Remiya Solutions<br>All right reserved!</td><td align="right"><button style="width:60px;height:24px;font-family:verdana;font-size:11px;" onclick="$(\'#'+g.id+"_about').fadeOut(500);\">Close</button></td></tr></table></td></tr>";q+="</table>";var r=600;var s=300;var t=(a(window).height()-200)/2+a(document).scrollTop();var u=(a(window).width()-300)/2;if(a("#"+g.id+"_about").length===0){a("body").append("<div id='"+g.id+"_about' style='display:none;position:absolute;background:red;width:"+r+"px;height:"+s+"px;top:"+t+"px;left:"+u+"px;'>about</div>");a("#"+g.id+"_about").html(q)}else{a("#"+g.id+"_about").css("top",t);a("#"+g.id+"_about").css("left",u)}a("#"+g.id+"_about").focus();a("#"+g.id+"_about").fadeIn(1e3)}else{g.idoc.execCommand(b,false,null)}if(a("#"+g.id).is(":visible")===false){a("#"+g.id).val(this.get_html());if(f){f.add(this.get_html())}if(undefined!==g.change){g.change()}}};this.get_text=function(){if(a("#"+g.id).is(":visible")){return a("#"+g.id).val()}var b;if(a.browser.msie){b=g.iframe.contentWindow.document.body.innerText}else{var c=g.iframe.contentWindow.document.body.ownerDocument.createRange();c.selectNodeContents(g.iframe.contentWindow.document.body);b=c}return b};this.set_text=function(b){var c=undefined===b?"":b;if(c===""&&a.browser.safari){c=" "}if(a("#"+g.id).is(":visible")){a("#"+g.id).val(c)}else{if(a.browser.mozilla||a.browser.safari){g.idoc.open("text/html","replace");g.idoc.write(c);g.idoc.close()}else{g.idoc.body.innerHTML="";if(c!==""){g.idoc.write(c)}}l();g.idoc.body.contentEditable=true}if(f){f.add(this.get_html())}if(undefined!==g.change){g.change()}return this};this.get_html=function(){var b;if(a("#"+g.id).is(":visible")){b=a("#"+g.id).val()}else{b=g.iframe.contentWindow.document.body.innerHTML}if(typeof getXHTML==="function"){return getXHTML(b)}else{return b}};this.change=function(a){g.change=a;return this};this.remove=function(){global_hb[g.id]=undefined;a("#"+g.id+"_wrap").remove();if(a("#"+g.id+"_about").length===0){a("#"+g.id+"_about").remove()}};this.post=function(b,c){if(undefined===c){c=this.get_html()}c=g.id+"="+c;a.ajax({type:"POST",data:c,url:b,dataType:"html",error:g.error,success:g.success})};this.get=function(b,c){if(undefined===c){c=this.get_html()}c=g.id+"="+c;a.ajax({type:"GET",data:c,url:b,dataType:"html",error:g.error,success:g.success})};this.success=function(a){g.success=a;return this};this.error=function(a){g.error=a;return this};this._init(false);return this}})(jQuery);(function(a){a.suggest=function(b,c){function t(){$currentResult=r();if($currentResult)$currentResult.removeClass(c.selectClass).prev().addClass(c.selectClass);else f.children("li:last-child").addClass(c.selectClass)}function s(){$currentResult=r();if($currentResult)$currentResult.removeClass(c.selectClass).next().addClass(c.selectClass);else f.children("li:first-child").addClass(c.selectClass)}function r(){if(!f.is(":visible"))return false;var a=f.children("li."+c.selectClass);if(!a.length)a=false;return a}function q(b,d){var e=[];var f=b.split(c.delimiter);for(var g=0;g<f.length;g++){var h=a.trim(f[g]);if(h){h=h.replace(new RegExp(d,"ig"),function(a){return'<span class="'+c.matchClass+'">'+a+"</span>"});e[e.length]=h}}return e}function p(b){if(!b)return;if(!b.length){f.hide();return}var d="";for(var e=0;e<b.length;e++)d+="<li>"+b[e]+"</li>";f.html(d).show();f.children("li").mouseover(function(){f.children("li").removeClass(c.selectClass);a(this).addClass(c.selectClass)})}function o(a,b,d){while(i.length&&j+d>c.maxCacheSize){var e=i.pop();j-=e["size"]}i.push({q:a,size:d,items:b});j+=d}function n(a){for(var b=0;b<i.length;b++)if(i[b]["q"]==a){i.unshift(i.splice(b,1)[0]);return i[0]}return false}function m(){var b=a.trim(e.val());if(b.length>=c.minchars){f.html("Loading...").show();cached=n(b);if(cached){p(cached["items"])}else{a.get(c.source,{q:b},function(a){var c=q(a,b);p(c);o(b,c,a.length)})}}else{f.hide()}}function l(a){if(/27$|38$|40$/.test(a.keyCode)&&f.is(":visible")||/^13$|^9$/.test(a.keyCode)&&r()){if(a.preventDefault)a.preventDefault();if(a.stopPropagation)a.stopPropagation();a.cancelBubble=true;a.returnValue=false;switch(a.keyCode){case 38:t();break;case 40:s();break;case 9:case 13:selectCurrentResult();break;case 27:f.hide();break}}else if(e.val().length!=h){if(g)clearTimeout(g);g=setTimeout(m,c.delay);h=e.val().length}}var d='<img src="../wp-content/themes/dlr/style/images/loader_widget_ft.gif" />';var e=a(b).attr("autocomplete","off");var f=a("#"+c.resultsId);var g=false;var h=0;var i=[];var j=0;f.addClass(c.resultsClass);e.blur(function(){setTimeout(function(){f.hide()},200)});try{f.bgiframe()}catch(k){}if(a.browser.mozilla)e.keypress(l);else e.keydown(l)};a.fn.suggest=function(b,c){if(!b)return;c=c||{};c.source=b;c.delay=c.delay||100;c.resultsClass=c.resultsClass||"ac_results";c.selectClass=c.selectClass||"ac_over";c.matchClass=c.matchClass||"ac_match";c.minchars=c.minchars||2;c.delimiter=c.delimiter||"\n";c.onSelect=c.onSelect||false;c.maxCacheSize=c.maxCacheSize||65536;c.resultsId=c.resultsId||"badgeList";this.each(function(){new a.suggest(this,c)});return this}})(jQuery)